!function(a,b){var c={};c.cacheData={},c.currentGame=null,c.currentGameTypes=null,c.currentGameStatistics=null,c.currentGameOrder=null,c.currentGameTrace=null,c.currentGameSubmit=null,c.currentGameMessage=null,c.currentIsMoreBouns={},c.getCurrentGame=function(){return c.currentGame},c.setCurrentGame=function(a){c.currentGame=a},c.getCurrentGameTypes=function(){return c.currentGameTypes},c.setCurrentGameTypes=function(a){c.currentGameTypes=a},c.getCurrentGameStatistics=function(){return c.currentGameStatistics},c.setCurrentGameStatistics=function(a){c.currentGameStatistics=a},c.getCurrentGameOrder=function(){return c.currentGameOrder},c.setCurrentGameOrder=function(a){c.currentGameOrder=a},c.getCurrentGameTrace=function(){return c.currentGameTrace},c.setCurrentGameTrace=function(a){c.currentGameTrace=a},c.getCurrentGameSubmit=function(){return c.currentGameSubmit},c.setCurrentGameSubmit=function(a){c.currentGameSubmit=a},c.getCurrentGameMessage=function(){return c.currentGameMessage},c.setCurrentGameMessage=function(a){c.currentGameMessage=a},a[b]=c}(phoenix,"Games"),function(a,b,c){var d={name:"",basePath:staticFileContextPath+"/static/js/game/",baseNamespace:"phoenix.Games.",dynamicConfigUrl:"",eventProxyPanel:"body"},e=a.Games,f=function(a){for(var b,c=$.trim(a).split("&"),d=0,e=c.length,f={};e>d;d++)b=c[d].split("="),b.length>0&&(f[b[0]]=2==b.length?b[1]:"");return f},g={init:function(a){var b=this;b.setName(a.name),b.currentNumber="",b.currentIssueCode=0,e.setCurrentGame(b),b.loadedHas={},b.currentGameMethod=null,b.dynamicConfig=null,b.methodLoadCache=!1,b.addEvent("afterSwitchGameMethod",function(){e.getCurrentGame().getCurrentGameMethod().reSet(),b.methodLoadCache=!1;var a=e.getCurrentGame().getCurrentGameMethod().getGameMethodName(),c=e.getCurrentGame().getDynamicConfig().gamelimit,d=e.getCurrentGame().getGameConfig().getInstance().defConfig.gameType;e.getCurrentGameStatistics().setMultipleLimit(c[a]?c[a].maxmultiple:-1),e.getCurrentGameStatistics().setMultipleDom(1),e.getCurrentGameStatistics().setMoneyUnitDom(1),"slmmc"!=$.trim(d)&&e.getCurrentGameTrace().hide(),e.getCurrentGame().getCurrentGameMethod().updataGamesInfo()}),b.addEvent("changeDynamicConfig",function(){b.updateDynamicConfig()})},getMaxMultipleLimit:function(a){var b=a||e.getCurrentGame().getCurrentGameMethod().getGameMethodName(),c=e.getCurrentGame().getDynamicConfig().gamelimit;return Number(c[b].maxmultiple)},getDynamicConfigUrl:function(){return e.getCurrentGame().getGameConfig().getInstance().getDynamicConfigUrl()},getServerDynamicConfig:function(a){var b=this,c=(b.defConfig,b.getName());$.ajax({url:e.getCurrentGame().getGameConfig().getInstance().getDynamicConfigUrl()+"?gametype="+c,dataType:"JSON",cache:!1,success:function(c){if(1==Number(c.isSuccess)){var d=c.data,e=JSON.stringify(c.data.gamelimit);e=e.replace("[",""),e=e.replace("]",""),gamelimit=jQuery.parseJSON(e),delete d.gamelimit,d.gamelimit=gamelimit,b.setDynamicConfig(d),$.isFunction(a)&&a.call(b,c.data)}}})},getDynamicConfig:function(){return this.dynamicConfig},setDynamicConfig:function(a){this.dynamicConfig=a,this.fireEvent("changeDynamicConfig",a)},addDynamicBonus:function(a,b){var c=this,d=c.getDynamicConfig();"undefined"!=typeof d.gamelimit&&"undefined"!=typeof d.gamelimit[a]&&(d.gamelimit[a].usergroupmoney=b)},updateDynamicConfig:function(){var a=this,b=a.getDynamicConfig(),c=b.lastballs.split(",");return 1==b.isstop?void setTimeout(function(){phoenix.Games.getCurrentGameMessage().show({type:"lotteryClose",data:{tplData:{lotterys:[1,2,3,4,5,6],lotteryName:"shishicai",lotteryPeriods:"20130528-276",orderDate:{year:"2013",month:"5",day:"3",hour:"1",min:"30"},lotteryType:[{name:"leli",pic:"#",url:"http://163.com"},{name:"kuaile8",pic:"#",url:"http://pp158.com"}]}}})},1e3):(a.setCurrentNumber(b.number),a.setCurrentIssueCode(b.issueCode),$("#J-lottery-info-number").html(b.number),$("#J-lottery-info-currentIssue").val(b.issueCode),$("#J-lottery-info-lastnumber").html(b.lastnumber),$("#lottery-info").html(b.ballInfo),$("#J-lottery-info-balls").find("em").each(function(a){this.innerHTML=c[a]}),e.cacheData.frequency={},void(e.cacheData.charts={}))},eventProxy:function(){var a=this,b=a.defConfig,c=$(b.eventProxyPanel);c.click(function(b){var c,d,e=b.target.getAttribute("data-param");e&&""!=$.trim(e)&&(b.preventDefault(),c=f(e),d=a.getCurrentGameMethod(),d&&d.exeEvent(c,b.target))})},getGameMethodByName:function(a){var b=this,c=b.loadedHas;return b.hasOwnProperty(a)&&c.hasOwnProperty(b.buildPath(a))?b[a]:void 0},switchGameMethod:function(a){{var b,c,d=this;d.loadedHas}if(!d.methodLoadCache){d.methodLoadCache=!0,d.fireEvent("beforeSwitchGameMethod",a);for(b in d)d.getGameMethodByName(b)&&(b!=a?d[b].hide():(d[b].show(),d.currentGameMethod=d[b],d.fireEvent("afterSwitchGameMethod")));d.getGameMethodByName(a)||d.setup(a,function(){c=d.getGameMethodByName(a),c.show(),d.currentGameMethod=c,d.fireEvent("afterSetup"),d.fireEvent("afterSwitchGameMethod")})}},getCurrentGameMethod:function(){return this.currentGameMethod},setup:function(a){var b,c=this,d=c.buildPath(a),e=function(){};b=arguments.length>0?arguments[arguments.length-1]:e,$.isFunction(b)||(b=e),c.isSetuped(a)||$.ajax({url:d,cache:!1,dataType:"script",success:function(){c.loadedHas[d]=!0,b.call(c)},error:function(a,b){alert("资源加载失败\n"+d+"\n错误类型："+b)}})},buildPath:function(a){var b=this,c=b.defConfig.basePath,d=b.defConfig.baseNamespace,e=c+d+a+".js";return e},isSetuped:function(a){var b=this,c=b.loadedHas,d=b.buildPath(a);return c.hasOwnProperty(d)},setSetuped:function(){},getGameConfig:function(){},getName:function(){return this.name},setName:function(a){this.name=a},setCurrentNumber:function(a){this.currentNumber=a},getCurrentNumber:function(){return this.currentNumber},setCurrentIssueCode:function(a){this.currentIssueCode=a},getCurrentIssueCode:function(){return this.currentIssueCode},editSubmitData:function(a){return a},bonusGroupProce:function(){},parseBallData:function(b,c){var d=a.Games,f={},g=[],h=[],i=d.getCurrentGameOrder();g=c.split("_");for(var j=g.length-1;j>=0;j--){h=[],singel=g[j].split("-");for(var k=singel.length-1;k>=0;k--)h.push(singel[k].split(""));f={type:b,original:h,lotterys:h,moneyUnit:e.getCurrentGameStatistics().getMoneyUnit(),multiple:e.getCurrentGameStatistics().getMultip(),onePrice:e.getCurrentGameStatistics().getOnePrice(),num:h.length},f.amountText=e.getCurrentGameStatistics().formatMoney(f.num*f.moneyUnit*f.multiple*f.onePrice),i.add(f)}},parseDataFormUrl:function(){var b=this,c=a.Games.getCurrentGameTypes(),d=$.trim(a.util.getParam("gametype")),e=$.trim(a.util.getParam("ball"));d&&c.changeMode(d),e&&b.parseBallData(d,e)}},h=a.Class(g,c);h.defConfig=d,a[b]=h}(phoenix,"Game",phoenix.Event),function(a,b,c,d){var e={name:"",UIContainer:"#J-balls-main-panel",ballsDom:".ball-number",ballAidDom:".ball-aid-hot",ballCurrentCls:"ball-number-current",methodMassageDom:".prompt .method-tip",methodExampleDom:".prompt .example-tip",hotColdUrl:"",randomBetsNum:500,danshiLimitBall:1e3},f=a.Games,g={init:function(a){var b=this;b.UIContainer=$(a.UIContainer),b.container=$("<div></div>").appendTo(b.UIContainer),b.buildUI(),b.hide(),b.balls=[],b.rebuildData(),b.ballsDom=b.getBallsDom(),b.ballsAidDom=b.getBallsAidDom(),b.isBallsComplete=!1,b.addEvent("updateData",function(a,b){var c=this,b=c.isBallsComplete?b:{lotterys:[],original:[]};f.getCurrentGameStatistics().updateData(b,c.getGameMethodName()),c.batchSetBallDom()}),b.addEvent("afterReset",function(){b.exeEvent_cancelCurrentButton()}),b.addEvent("afterSetBallData",function(){b.exeEvent_cancelCurrentButton()})},getBallsDom:function(){var a=this,b=a.defConfig,c=a.balls;return c.length<1?[]:a.ballsDom||function(){for(var d=a.container.find(b.ballsDom),e=0,f=d.length,g=[],h=[],i=c[0].length;f>e;e++)g.push(d[e]),((e+1)%i==0||e+1==f)&&(h.push(g),g=[]);return h}()},updataGamesInfo:function(){var a=this,b=a.getGameMethodName(),c=f.getCurrentGame(),d=b+"lostcurrentFre",e=f.getCurrentGame().getGameConfig().getInstance().getBetAwardUrl()+"?type="+b+"&extent=currentFre&line=5&lenth=30";f.cacheData.gameBonus||(f.cacheData.gameBonus={}),f.cacheData.gameTips||(f.cacheData.gameTips={}),f.cacheData.frequency||(f.cacheData.frequency={}),f.currentIsMoreBouns.moreBouns||(f.currentIsMoreBouns.moreBouns={}),f.cacheData.gameBonus[e]&&c.addDynamicBonus(b,f.cacheData.gameBonus[e]),f.cacheData.gameTips[e]&&a.methodTip(f.cacheData.gameTips[e]),f.cacheData.frequency[d]&&a.getHotCold(b,"currentFre","lost","当前遗漏"),f.cacheData.gameBonus[e]&&f.cacheData.frequency[d]&&f.cacheData.gameTips[e]||$.ajax({url:e,dataType:"json",cache:!1,success:function(g){1==Number(g.isSuccess)&&(data=g.data,"undefined"!=typeof data.gameTips&&(f.cacheData.gameTips[e]=data.gameTips,a.methodTip(data.gameTips)),("undefined"!=typeof data.frequency||data.frequency!=[])&&(f.cacheData.frequency[d]=data.frequency,a.getHotCold(b,"currentFre","lost")),data.gameTips&&"undefined"!=typeof data.gameTips.actualBonus&&(f.cacheData.gameBonus[e]=data.gameTips.actualBonus,c.addDynamicBonus(b,data.gameTips.actualBonus)),"undefined"!=typeof g.moreBouns&&(f.currentIsMoreBouns.moreBouns[b]=g.moreBouns))}})},getChart:function(a,b){var c=this,d=$.trim(a),e=f.getCurrentGame().getGameConfig().getInstance().trendChartUrl()+d+"&extent=currentFre&line=5&lenth=30";"undefined"==typeof f.cacheData.charts&&(f.cacheData.charts={}),"undefined"!=typeof f.cacheData.charts[d]?b&&b(f.cacheData.charts[d]):$.ajax({url:e,dataType:"json",cache:!1,success:function(a){if(1==a.isSuccess)a.data.historyBalls,f.cacheData.charts[d]=a.data.historyBalls,b&&b(f.cacheData.charts[d]);else try{console.log("服务器异常,请刷新页面重试。")}catch(c){}}}),c.fireEvent("afterUpdataGamesInfo",a)},methodTip:function(a){var b=this,c=b.defConfig;$(c.methodMassageDom).html(a.tips),$(c.methodExampleDom).html(a.example)},getHotCold:function(a,b,c,d){var e=this,g=e.container.find(".number-select-title"),h=e.container.find(".number-select-content");cacheName=a+c+b,lostClass=".game-frequency-lost-length",freClass=".game-frequency-fre-length",("maxFre"==b||"currentFre"==b)&&(c="lost");var i=f.getCurrentGame().getGameConfig().getInstance().getHotColdUrl()+"?gameMode="+a+"&extent="+b+"&frequencyType="+c+"&line=5&lenth=30";"lost"==c?($(freClass).hide(),$(lostClass).show()):($(freClass).show(),$(lostClass).hide()),g.find("a,li").removeClass("current"),g.find(".period"+b).addClass("current"),g.find("."+c).addClass("current"),h.find(".ball-title span").html(d),f.cacheData.frequency||(f.cacheData.frequency={}),f.cacheData.frequency[cacheName]?e.reBuildHotCold(f.cacheData.frequency[cacheName],c):$.get(i,function(a){e.reBuildHotCold(a,c),f.cacheData.frequency[cacheName]=a},"json")},reBuildHotCold:function(a,b){for(var c,d=this,e=[],f=[],g=0,h=0,i=0;i<a.length;i++){c=a[i];for(var j in c){var k=c[j].currentNum,l=c[j].pinlv;e.push([l,k]),f.push(l),d.setBallAidData(i,k,l)}g=Math.min.apply(Math,f),h=Math.max.apply(Math,f);for(var m=0;m<e.length;m++)"lost"==b?e[m][0]==h&&d.setBallAidData(i,e[m][1],e[m][0],"ball-aid-hot"):(e[m][0]==g&&d.setBallAidData(i,e[m][1],e[m][0],"ball-aid-cold"),e[m][0]==h&&d.setBallAidData(i,e[m][1],e[m][0],"ball-aid-hot"));e=[],f=[]}},initHotColdEvent:function(){var a=this,b=30,c="lost",d="game-frequency-lost-length",e="game-frequency-fre-length",g=".game-frequency-type li",h=".game-frequency-lost-length a, .game-frequency-fre-length a";a.container.on("click",g,function(){var a,g=($(this).parent(),f.getCurrentGame().getCurrentGameMethod().getGameMethodName());$(this).hasClass("fre")?(c=$(this).attr("data-type"),$("."+e).show(),$("."+d).hide(),b=30,a="30期"):$(this).hasClass("lost")&&(c=$(this).attr("data-type"),$("."+e).hide(),$("."+d).show(),b="currentFre",a="当前遗漏"),f.getCurrentGame().getCurrentGameMethod().getHotCold(g,b,c,a)}),a.container.on("click",h,function(){var a=($(this).parent(),f.getCurrentGame().getCurrentGameMethod().getGameMethodName()),b=$(this).html(),d=$(this).attr("data-type");f.getCurrentGame().getCurrentGameMethod().getHotCold(a,d,c,b)})},reSelect:function(a){var b,c,d,e,f,g,h=this,i=(h.getGameMethodName(),a),j=!1;for(h.reSet(),b=0,c=i.length;c>b;b++)for(d=0,e=i[b].length;e>d;d++)f=b,g=i[b][d],h.setBallData(f,g,1),j=!0;j&&h.updateData()},makePostParameter:function(a){for(var b=[],c=a.length,d=0;c>d;d++)b=b.concat(a[d].join(""));return b.join(",")},arrIndexOf:function(a,b){for(var c=0,d=0;d<b.length;d++)b[d]==a&&(c+=1);return c||-1},rebuildData:function(){},getBallData:function(){return this.balls},setBallData:function(a,b,c){var d=this,e=d.getBallData();a>=0&&a<e.length&&b>=0&&b<e[0].length&&(e[a][b]=c),d.fireEvent("afterSetBallData",a,b,c)},setBallAidData:function(a,b,c,d){var e=this,f="ball-aid",g=e.getBallsAidDom(),d=d?f+" "+d:f;a>=0&&a<g.length&&g[a]&&b>=0&&b<g[a].length&&g[a][b]&&(g[a][b].innerHTML=c,g[a][b].className=d)},getBallsAidDom:function(){var a=this,b=a.defConfig,c=a.balls;return c.length<1?[]:a.ballsAidDom||function(){var d=a.container.find(b.ballAidDom),e=0,f=c.length,g=[];for(i=0;f>i;i++){var h=c[i],k=h.length,l=[];for(j=0;k>j;j++)d[e]&&l.push(d[e]),e++;g.push(l)}return g}()},reSet:function(a){var b=this;b.isBallsComplete=!1,b.rebuildData(a),b.updateData(),b.fireEvent("afterReset")},getGameMethodName:function(){return this.defConfig.name},show:function(){var a=this;a.fireEvent("beforeShow"),a.container.show(),a.fireEvent("afterShow")},hide:function(){var a=this;a.fireEvent("beforeHide"),a.container.hide(),a.fireEvent("afterHide")},exeEvent:function(a,b){var c=this;$.isFunction(c["exeEvent_"+a.action])&&c["exeEvent_"+a.action].call(c,a,b)},exeEvent_batchSetBall:function(a,b){var c=this,d=c.balls,e=Number(a.row),g=a.bound,h=d[e],i=0,j=h.length,k="undefined"==typeof a.start?0:Number(a.start);for(halfLen=Math.ceil((j-k)/2+k),dom=$(b),i=k;j>i;i++)c.setBallData(e,i,-1);switch(g){case"all":for(i=k;j>i;i++)c.setBallData(e,i,1);break;case"big":for(i=halfLen;j>i;i++)c.setBallData(e,i,1);break;case"small":var l;for(l=f.getCurrentGame().getGameConfig().getInstance().defConfig.gameType.indexOf("115")<0?k:"quwei.normal.caizhongwei"==c.defConfig.name?k+2:k+1,i=l;halfLen>i;i++)c.setBallData(e,i,1);break;case"odd":for(i=k;j>i;i++)(i+1)%2!=1&&c.setBallData(e,i,1);break;case"even":for(i=k;j>i;i++)(i+1)%2==1&&c.setBallData(e,i,1);break;case"none":}dom.addClass("current"),c.updateData()},exeEvent_cancelCurrentButton:function(){var a=this,b=a.container,c="undefined"!=typeof x?b.find(".ball-control").eq(x):b.find(".ball-control");c.find("a").removeClass("current")},exeEvent_ball:function(a,b){var c=this,e=$(b),f=c.defConfig.ballCurrentCls;if(a.value!=d&&a.row!=d)e.hasClass(f)?c.setBallData(Number(a.row),Number(a.value),-1):(c.fireEvent("beforeSelect"),c.setBallData(Number(a.row),Number(a.value),1));else try{console.log("GameMethod.exeEvent_ball: lack param")}catch(g){}c.updateData()},batchSetBallDom:function(){for(var a=this,b=a.defConfig,c=b.ballCurrentCls,d=a.balls,e=0,f=0,g=d.length,h=0,i=a.getBallsDom(),j="";g>e;e++)for(h=d[e].length,f=0;h>f;f++)1==d[e][f]?(j=i[e][f].className,j=(" "+j+" ").replace(" "+c,""),j+=" "+c,i[e][f].className=j):(j=i[e][f].className,j=(" "+j+" ").replace(" "+c,""),i[e][f].className=j)},updateData:function(){var a=this,b=a.getLottery();a.fireEvent("updateData",{lotterys:b,original:a.getOriginal()})},getOriginal:function(){var a=this,b=a.getBallData(),c=b.length,d=b[0].length;for(i=0,j=0,row=[],result=[];c>i;i++){for(row=[],j=0;d>j;j++)b[i][j]>0&&row.push(j);result.push(row)}return result},getLottery:function(a){for(var b,c=this,d=c.getBallData(),e=0,f=d.length,g=!0,h=0,i=0,j=[],k=1,l=0;f>e;e++){for(j[e]=[],b=d[e],i=b.length,g=!0,l=0,h=0;i>h;h++)b[h]>0&&(g=!1,a||j[e].push(h),l++);if(g)return c.isBallsComplete=!1,[];k*=l}return c.isBallsComplete=!0,a?k:c.isBallsComplete?c.combination(j):[]},removeSame:function(a){{var b,c=0,d=this,e=this.getBallData()[0].length;a.length}for(b=Math.floor(Math.random()*e);c<a.length;c++)if(b==a[c])return arguments.callee.call(d,a);return b},removeArraySame:function(a){{var b,c=this,d=0,e=c.getBallData()[0].length;data.length}for(b=Math.floor(Math.random()*e);d<a.length;d++)if(b==a[d])return arguments.callee.call(c,a);return b},getRandomBetsNum:function(){return this.defConfig.randomBetsNum},createRandomNum:function(){for(var a=this,b=[],c=a.getBallData().length,d=a.getBallData()[0].length,e=0;c>e;e++)b[e]=[Math.floor(Math.random()*d)],b[e].sort(function(a,b){return a>b?1:-1});return b},checkRandomBets:function(a,b){var c=this,d="undefined"==typeof a?!0:!1,a=a||{},e=[],b=b||0,g=(c.getBallData().length,c.getBallData()[0].length,f.getCurrentGameOrder().getTotal().orders);if(e=c.createRandomNum(),Number(b)>Number(c.getRandomBetsNum()))return e;if(d)for(var h=0;h<g.length;h++)if(g[h].type==c.defConfig.name){var i=g[h].original.join("");a[i]=i}return a[e.join("")]?(b++,arguments.callee.call(c,a,b)):e},randomNum:function(){var a=this,b=[],c=null,d=(a.getBallData(),a.defConfig.name,[]),e=[];return b=a.checkRandomBets(),e=b,d=a.combination(e),c={type:f.getCurrentGame().getCurrentGameMethod().getGameMethodName(),original:e,lotterys:d,moneyUnit:f.getCurrentGameStatistics().getMoneyUnit(),multiple:f.getCurrentGameStatistics().getMultip(),onePrice:f.getCurrentGameStatistics().getOnePrice(),num:d.length},c.amountText=f.getCurrentGameStatistics().formatMoney(c.num*c.moneyUnit*c.multiple*c.onePrice),c},randomLotterys:function(a){var b=this,c=0;for(f.getCurrentGameOrder().cancelSelectOrder();a>c;c++)f.getCurrentGameOrder().add(b.randomNum())},ballsErrorTip:function(){},countBallsNum:function(){for(var a=this,b=0,c=a.getBallData(),d=c.length-1;d>=0;d--)if("[object Array]"==Object.prototype.toString.call(c[d])&&c[d].length>0)for(var e=c[d].length-1;e>=0;e--)1==c[d][e]&&b++;else 1==c[d]&&b++;return b},countBallsNumInLine:function(a){var b=this,c=0,d=b.getBallData();if("[object Array]"==Object.prototype.toString.call(d[a])&&d[a].length>0)for(var e=d[a].length-1;e>=0;e--)1==d[a][e]&&c++;else 1==d[a]&&c++;return c||-1},LimitMaxBalls:function(a){{var b=this,c=0;b.getBallData(),Number(c)}return c=b.countBallsNum(),c>a?!0:!1},checkBallIsComplete:function(){for(var a,b=this,c=b.getBallData(),d=0,e=c.length,f=!0,g=0,h=0;e>d;d++){for(a=c[d],h=a.length,f=!0,g=0;h>g;g++)a[g]>0&&(f=!1);if(f)return b.isBallsComplete=!1,!1}return b.isBallsComplete=!0},combine:function(a,b,c){var d=[],e=0;if(c=c||[],0==b)return[c];for(;e<=a.length-b;e++)d=d.concat(arguments.callee(a.slice(e+1),b-1,c.slice(0).concat(a[e])));return d},combination:function(a){if(a.length<1)return[];var b,c,d,e=(a[0].length,a.length),f=[],g=[],h=[];for(f[b=e]=1;b--;)f[b]=f[b+1]*a[b].length;for(d=f[0],b=0;d>b;b++){for(h=[],c=0;e>c;c++)h[c]=a[c][~~(b%f[c]/f[c+1])];g[b]=h}return g},checkLimitBall:function(a){var b=this,c=b.defConfig.danshiLimitBall,d=f.getCurrentGameMessage(),e=Number(a.lotterys.length)||0;e>c&&(a.lotterys=[],d.show({mask:!0,content:['<div class="bd text-center">','<div class="pop-waring">','<i class="ico-waring"></i>','<div style="display:inline-block;*zoom:1;*display:inline;vertical-align:middle">最多支持'+c+"注单式内容，请调整！</div>","</div>","</div>"].join(""),closeIsShow:!0,closeFun:function(){this.hide()}}))}},h=a.Class(g,c);h.defConfig=e,a[b]=h}(phoenix,"GameMethod",phoenix.Event),function(a,b,c){var d,e={lotteryClose:['<div class="bd text-center">','<p class="text-title text-left"><#=msg#><br /></p>','<dl class="lottery-list">',"<dt>您可以购买以下彩种</dt>","<#=lotteryType#>","</dl>","</div>"].join(""),checkLotters:['<div class="bd">','<ul class="ui-form">',"<li>",'<label for="question1" class="ui-label">彩种：</label>','<span class="ui-text-info"><#=lotteryName#></span>',"</li>","<li>",'<label for="question1" class="ui-label" >期号：</label>','<span class="ui-text-info"><#=lotteryDate#></span>',"</li>","<li>",'<label for="answer1" class="ui-label">详情：</label>','<div class="textarea" style="font-size:12px;" >',"<#=lotteryInfo#>","</div>","</li>","<li>",'<label for="question2" class="ui-label">付款总金额：</label>','<span class="ui-text-info"><span class="color-red"><#=lotteryamount#></span>元</span>',"</li>","<li>",'<label for="question2" class="ui-label">付款帐号：</label>','<span class="ui-text-info"><span class="color-red"><#=lotteryAcc#></span></span>',"</li>","</ul>",'<p class="text-note"><#=lotteryChareg#></p>','<p class="text-note"><#=lotteryCharegPlurality#></p>',"</div>"].join(""),nonSaleTime:['<div class="bd text-center">','<p class="text-title text-left">非常抱歉，本彩种未到销售时间。<br />请与<#=orderDate#>后再购买</p>','<dl class="lottery-list">',"<dt>您可以购买以下彩种</dt>","<#=lotteryType#>","</dl>","</div>"].join(""),normal:['<div class="bd text-center">','<div class="pop-waring">','<i class="ico-waring <#=icon-class#>"></i>','<h4 class="pop-text"><#=msg#><br /></h4>',"</div>","</div>"].join(""),invalidtext:['<div class="bd text-center">','<div class="pop-waring">','<i class="ico-waring <#=icon-class#>"></i>','<h4 class="pop-text"><#=msg#><br /></h4>',"</div>","</div>"].join(""),betExpired:['<div class="bd text-center">','<div class="pop-waring">','<i class="ico-waring <#=icon-class#>"></i>','<h4 class="pop-text"><#=msg#><br /></h4>',"</div>","</div>"].join(""),multipleOver:['<div class="bd text-center">','<div class="pop-waring">','<i class="ico-waring <#=icon-class#>"></i>','<h4 class="pop-text"><#=msg#><br /></h4>',"</div>","</div>"].join(""),pauseBet:['<div class="bd text-center">','<div class="pop-waring">','<i class="ico-waring <#=icon-class#>"></i>','<h4 class="pop-text"><#=msg#><br /></h4>',"</div>","</div>"].join(""),successTip:['<div class="bd text-center">','<div class="pop-title">','<i class="ico-success"></i>','<h4 class="pop-text"><#=msg#><br /></h4>',"</div>",'<p class="text-note">您可以通过”<a href="'+baseUrl+'<#=url#>" target="_black"><#=gameType#></a>“查询您的投注记录！</p>',"</div>"].join(""),checkBalls:['<div class="bd text-center">','<div class="pop-title">','<i class="ico-waring <#=iconClass#>"></i>','<h4 class="pop-text">请至少选择一注投注号码！</h4>',"</div>",'<div class="pop-btn ">','<a href="javascript:void(0);" class="btn closeBtn">关 闭<b class="btn-inner"></b></a>',"</div>","</div>"].join(""),subFaild:['<div class="bd text-center">','<div class="pop-title">','<i class="ico-error"></i>','<h4 class="pop-text"><#=msg#><br /></h4>',"</div>",'<div class="pop-btn ">','<a href="javascript:void(0);" class="btn closeBtn">关 闭<b class="btn-inner"></b></a>',"</div>","</div>"].join(""),Insufficientbalance:['<div class="bd text-center">','<div class="pop-title">','<i class="ico-error"></i>','<h4 class="pop-text">您的余额不足，请充值！</h4>',"</div>","</div>"].join(""),blockade:['<div class="bd panel-game-msg-blockade" id="J-blockade-panel-main">','<form id="J-form-blockade-detail" action="" target="_blank" method="post"></form>','<div class="game-msg-blockade-text">存在<#=blockadeType#>内容，系统已为您做出 <a href="#" data-action="blockade-detail">最佳处理</a> ，点击<span class="color-red">“确认”</span>完成投注</div>',"<div>",'<div class="game-msg-blockade-line-title">彩种：<#=gameTypeTitle#></div>','<div class="game-msg-blockade-line-title">期号：<#=currentGameNumber#></div>',"</div>",'<div id="J-game-panel-msg-blockade-0">','<div class="game-msg-blockade-cont" id="J-msg-panel-submit-blockade-error0"><#=blockadeData0#></div>',"</div>",'<div class="game-msg-blockade-panel-money">','<div><b>付款总金额：</b><span class="color-red"><b id="J-money-blockade-adjust"><#=amountAdjust#></b></span> 元&nbsp;&nbsp;&nbsp;&nbsp;<span style="display:<#=display#>"><b>减少投入：</b><span class="color-red"><b id="J-money-blockade-change"><#=amountChange#></b></span> 元</span></div>',"<div><b>付款账号：</b><#=username#></div>","</div>","<div>",'<p class="text-note"><#=lotteryChareg#></p>','<p class="text-note"><#=lotteryCharegPlurality#></p>',"</div>","</div>"].join(""),overLimit:['<div class="bd text-center"><div class="pop-title"><i class="ico-waring"></i><h4 class="pop-text"><#=msg#><br /></h4></div>','<div class="content" style="max-height:150px;overflow:auto;">',"<#=contentinfo#>","</div>","</div>"].join("")},f=null,g=a.Games,h={init:function(){var b=this;b.win=new a.MiniWindow({cls:"pop w-9"}),b.mask=a.Mask.getInstance(),b.reSet(),b.win.addEvent("afterHide",function(){b.reSet()})},doAction:function(a){var b=this,c="rebulid"+a.type,d="getHtml"+a.type,e=function(){};b[c]&&$.isFunction(b[c])&&(e=b[c]),a.tpl="undefined"==typeof a.tpl?b[d]():""+a.tpl,delete a.type,e.call(b,a)},formatHtml:function(a,b){var c,d,e=b;for(c in e)e.hasOwnProperty(c)&&(d=RegExp("<#="+c+"#>","g"),a=a.replace(d,e[c]));return a},arrIndexOf:function(a,b){for(var c=0,d=0;d<b.length;d++)b[d]==a&&(c+=1);return c||-1},getHtmlWaring:function(){var a=this.defConfig;return a.normal},rebulidnormal:function(a){var b=this,c={};c.mask=!0,c.closeText="关 闭",c.closeIsShow=!0,c.closeFun=function(){b.hide()},c.content=b.formatHtml(a.tpl,a.data.tplData),b.show($.extend(c,a))},getHtmlnormal:function(){return this.getHtmlWaring()},rebulidcheckLotters:function(a){var b=this,c=(g.getCurrentGameOrder().getTotal().orders,a.data.tplData.lotteryTraceInfo()),d=phoenix.util.ToForamtmoney(a.data.tplData.lotteryamount),e=Number(g.getCurrentGame().getGameConfig().getInstance().defConfig.backOutStartFee)/1e4,f=Number(g.getCurrentGame().getGameConfig().getInstance().defConfig.backOutRadio)/1e4;if(result={},result.mask=!0,result.iconClass="",c.length<1)d>e&&0!=Number(e)&&0!=Number(f)?(a.data.tplData.lotteryChareg='<div id="showLotteryChareg" style="display: none;">购买后请您尽量避免撤单，如撤单将收取手续费：<span class="price"><dfn>&yen;</dfn><span class="handlingCharge">'+g.getCurrentGameStatistics().formatMoney(f*d,3)+"</span>元</span></div>",a.data.tplData.lotteryCharegPlurality=""):(a.data.tplData.lotteryChareg="",a.data.tplData.lotteryCharegPlurality="");else{a.data.tplData.lotteryChareg="";var h="",i=0,j=0,k=a.data.tplData.lotteryOnlyAmount;h='<div style="margin-top:-12px;" id="showLotteryChareg">购买后请您尽量避免撤单，如撤单将收取手续费：</div><ul class="textarea cancel-bets clearfix" style="font-size:12px;margin-top:10px;"> <li><span style="font-size:13px;font-weight:500">奖期</span><span style="font-size:13px;font-weight:500">撤单手续费</span></li>';for(var l=0;l<c.length;l++)i=Number(c[l].multiple*k),i>e&&(j+=i*f,h+="<li><span>第"+c[l].number+'期</span><span class="price"><dfn>&yen;</dfn>'+g.getCurrentGameStatistics().formatMoney(i*f,3)+"元</span></li>");h+="</ul>",a.data.tplData.lotteryCharegPlurality=j>0&&0!=Number(e)&&0!=Number(f)?h:""}result.content=b.formatHtml(a.tpl,a.data.tplData),b.show($.extend(result,a))},getHtmlcheckLotters:function(){var a=this.defConfig;return a.checkLotters},rebulidlotteryClose:function(a){var b=this,c=(g.getCurrentGameOrder().getTotal().orders,{});c.mask=!0,c.iconClass="",c.content=b.formatHtml(a.tpl,a.data.tplData),b.show($.extend(c,a))},getHtmllotteryClose:function(){var a=this.defConfig;return a.lotteryClose},rebulidnonSaleTime:function(a){var b=this,c={};time=a.data.tplData.orderDate,typeArray=a.data.tplData.lotteryType,c.mask=!0,c.iconClass="",c.closeIsShow=!0,c.closeFun=function(){b.hide()},a.data.tplData.orderDate=function(){return time.year+"年"+time.month+"月"+time.day+"日 "+time.hour+":"+time.min},a.data.tplData.lotteryType=function(){var a="";if($.isArray(typeArray))for(var b=0;b<typeArray.length;b++)a+='<dd><span style="background:url('+typeArray[b].pic+')" class="pic" title="'+typeArray[b].name+'" alt="'+typeArray[b].name+'"></span><a href="'+typeArray[b].url+'" class="btn">去投注<b class="btn-inner"></b></a></dd>';return a},c.content=b.formatHtml(a.tpl,a.data.tplData),b.show($.extend(c,a))},getHtmlnonSaleTime:function(){var a=this.defConfig;return a.nonSaleTime},rebulidmustChoose:function(a){var b=this,c={};c.mask=!0,c.iconClass="",c.closeIsShow=!0,c.closeFun=function(){b.hide()},c.content=b.formatHtml(a.tpl,a.data.tplData),b.show($.extend(c,a))},getHtmlmustChoose:function(){return this.getHtmlWaring()},rebulidnetAbnormal:function(a){var b=this,c={};c.mask=!0,c.iconClass="",c.closeIsShow=!0,c.closeFun=function(){b.hide()},c.content=b.formatHtml(a.tpl,a.data.tplData),b.show($.extend(c,a))},getHtmlnetAbnormal:function(){return this.getHtmlWaring()},rebulidsuccess:function(a){var b=this,c={};c.mask=!0,c.iconClass="",c.closeIsShow=!0,c.closeFun=function(){b.hide()},c.content=b.formatHtml(a.tpl,a.data.tplData),b.show($.extend(c,a))},getHtmlsuccess:function(){var a=this.defConfig;return a.successTip},rebulidloginTimeout:function(a){var b=this,c={};c.mask=!0,c.closeIsShow=!0,c.closeFun=function(){b.hide()},c.content=b.formatHtml(a.tpl,a.data.tplData),b.show($.extend(c,a))},getHtmlloginTimeout:function(){return this.getHtmlWaring()},rebulidserverError:function(a){var b=this,c={};c.mask=!0,c.iconClass="",c.closeIsShow=!0,c.closeFun=function(){b.hide()},c.content=b.formatHtml(a.tpl,a.data.tplData),b.show($.extend(c,a))},getHtmlserverError:function(){return this.getHtmlWaring()},rebulidsubFaild:function(a){var b=this,c={};c.mask=!0,c.iconClass="",c.closeIsShow=!0,c.closeFun=function(){b.hide()},c.content=b.formatHtml(a.tpl,a.data.tplData),b.show($.extend(c,a))},getHtmlsubFaild:function(){return this.getHtmlWaring()},rebulidInsufficientbalance:function(a){var b=this,c={};c.mask=!0,c.closeIsShow=!0,c.confirmIsShow=!0,c.confirmText="去充值",c.confirmFun=function(){window.open(_logOut+"/fund")},c.closeFun=function(){b.hide()},c.content=b.formatHtml(a.tpl,a.data.tplData),b.show($.extend(c,a))},getHtmlInsufficientbalance:function(){return this.getHtmlWaring()},rebulidpauseBet:function(a){var b=this,c={};c.mask=!0,c.confirmText="投 注",c.confirmIsShow=!0,c.confirmFun=function(){for(var b=g.getCurrentGameOrder(),c=0;c<a.data.tplData.balls.length;c++)for(j=0;j<b.orderData.length;j++)b.orderData[j].id==a.data.tplData.balls[c].id&&b.orderData.splice(j,1);g.getCurrentGameSubmit().submitData()},c.closeText="关 闭",c.closeIsShow=!0,c.closeFun=function(){b.hide()},a.data.tplData.msg=function(){for(var c=[],d=g.getCurrentGame().getGameConfig().getInstance(),e=0;e<a.data.tplData.balls.length;e++){var f=a.data.tplData.balls[e].type,h=d.getTitleByName(f);-1==b.arrIndexOf(h.join(""),c)&&c.push(h.join(""))}return"您的投注内容中“"+c.join("")+"”已暂停销售，是否完成剩余内容投注？"},c.content=b.formatHtml(a.tpl,a.data.tplData),b.show($.extend(c,a))},getHtmlpauseBet:function(){var a=this.defConfig;return a.pauseBet},rebulidmultipleOver:function(a){var b=this,c={};c.mask=!0,c.iconClass="",c.closeText="关 闭",c.closeIsShow=!0,c.closeFun=function(){b.hide()},a.data.tplData.msg=function(){for(var c=[],d=g.getCurrentGame().getGameConfig().getInstance(),e=0;e<a.data.tplData.balls.length;e++){var f=a.data.tplData.balls[e].type,h=d.getTitleByName(f);-1==b.arrIndexOf(h.join(""),c)&&c.push(h.join(""))}return"您的投注内容中“"+c.join("")+"”超出倍数限制，请调整！"},c.content=b.formatHtml(a.tpl,a.data.tplData),b.show($.extend(c,a))},getHtmlmultipleOver:function(){var a=this.defConfig;return a.multipleOver},rebulidinvalidtext:function(a){var b=this,c={};c.mask=!0,c.confirmText="刷新页面",c.confirmIsShow=!0,c.confirmFun=function(){window.location.reload()},c.content=b.formatHtml(b.getHtmlinvalidtext(),a),b.show($.extend(c,a))},getHtmlinvalidtext:function(){var a=this.defConfig;return a.invalidtext},rebulidbetExpired:function(a){var b=this,c={};c.mask=!0,c.closeText="关 闭",c.closeIsShow=!0,c.closeFun=function(){b.hide()},a.data.tplData.msg=function(){return"您好，"+a.data.tplData.bitDate.expiredDate+"期 已截止销售，当前期为"+a.data.tplData.bitDate.current+"期 ，请留意！"},c.content=b.formatHtml(b.getHtmlbetExpired(),a.data.tplData),b.show($.extend(c,a))},getHtmlbetExpired:function(){var a=this.defConfig;return a.betExpired},rebulidillegalTools:function(a){var b=this,c={};c.mask=!0,c.confirmText="刷新页面",c.confirmIsShow=!0,c.confirmFun=function(){window.location.reload()},c.content=b.formatHtml(b.getHtmlbetExpired(),a.data.tplData),b.show($.extend(c,a))},getHtmloverLimit:function(){return this.defConfig.overLimit},rebulidoverLimit:function(a){var b,c,d=this,e={},f=a.data.tplData,g=a.data.overMutipleData,h=[],i=0;e.mask=!0,e.closeText="确 定",e.closeIsShow=!0,e.closeFun=function(){d.hide()},$.each(g,function(a){c=g[a].betDetail.length>3?g[a].betDetail.substr(0,3)+".. <a title="+g[a].betDetail+">详情</a>":g[a].betDetail,h.push(g[a].webIssueCode+"期&nbsp;&nbsp;"+g[a].betMethod+"&nbsp;&nbsp;"),"1"==$.trim(g[a].moneyunit)?(i=parseFloat(g[a].multiple)/10,b="元"):(i=parseFloat(g[a].multiple),b="角"),h.push(c+"&nbsp;&nbsp;("+b+")本期最多投"),h.push("&nbsp;&nbsp;"+i+"倍</br>")
}),f.contentinfo=h.join(""),e.content=d.formatHtml(d.getHtmlbetExpired(),a.data.tplData),d.show($.extend(e,a))},getHtmlblockade:function(){return this.defConfig.blockade},rebulidblockade:function(b){function c(a){return a=a.replace(/ /g,"&amp;nbsp;")}var d=this,e={},f=b.data.tplData,h=b.data.orderData,i=b.data.blockadeInfo,j=h.balls,k={},l="",m="",n=[],o="",p=g.getCurrentGameOrder().formatMoney,q=28,r=!1,s=['<ul class="game-msg-blockade-balls">'],t=0,u=0,v=(h.isTrace,Number(g.getCurrentGame().getGameConfig().getInstance().defConfig.backOutStartFee)/1e4),w=Number(g.getCurrentGame().getGameConfig().getInstance().defConfig.backOutRadio)/1e4,x=Number(h.amount);if(0==x){var y=g.getCurrentGameMessage(),z=phoenix.Games.getCurrentGame().getGameConfig().getInstance().defConfig.gameType,A=[],B=!0,C=!0,D=[],E="";return"ssq"==z?($.each(j,function(){A=this.lockPoint.beforeBlockadeList,$.each(A,function(){this.blockadeDetail.length>2&&0==Number(this.beishu)&&(B=!1),2==this.blockadeDetail.length&&0==Number(this.beishu)&&($.inArray(this.blockadeDetail,D)<0&&D.push(this.blockadeDetail),C=!1)})}),E=0==B&&0!=C?"<div class='pop-title'><i class='ico-waring'></i><h4 class='pop-text'>您投注的内容中红球受限，请调整！</h4></div>":0!=B&&0==C?"<div class='pop-title'><i class='ico-waring'></i><h4 class='pop-text'>您投注的内容中蓝球受限，受限号码"+D.join(",")+"，请调整！</h4></div>":0==B&&0==C?"<div class='pop-title'><i class='ico-waring'></i><h4 class='pop-text'>您投注的内容已经全部受限，请调整！</h4></div>":"<div class='pop-title'><i class='ico-waring'></i><h4 class='pop-text'>您投注的内容有受限号码,请点击最佳处理查看后，进行调整！</h4></div>",y.show({mask:!0,title:"温馨提示",content:E,cancelIsShow:!0,cancelFun:function(){y.hide()}}),!1):(y.show({mask:!0,title:"温馨提示",content:"<div class='pop-title'><i class='ico-waring'></i><h4 class='pop-text'>您投注的内容已经全部受限，请调整！</h4></div>",cancelIsShow:!0,cancelFun:function(){y.hide()}}),!1)}if(x>v&&0!=Number(v)&&0!=Number(w)?(handlingCharge=g.getCurrentGameStatistics().formatMoney(x*w,3),b.data.tplData.lotteryChareg='<div id="showLotteryChareg" class="text-note">购买后请您尽量避免撤单，如撤单将收取手续费：<span class="price"><dfn>&yen;</dfn><span class="handlingCharge">'+handlingCharge+'</span>元</span></div><p class="text-note">本次投注，若未涉及到付款金额变化，将不再提示</p>'):(handlingCharge=0,b.data.tplData.lotteryChareg='<p class="text-note">本次投注，若未涉及到付款金额变化，将不再提示</p>'),b.data.tplData.lotteryCharegPlurality="",e.mask=!0,e.closeIsShow=!0,e.closeText="关 闭",e.confirmIsShow=!0,e.confirmText="确 认",e.closeFun=function(){d.hide()},$.each(j,function(){t=this.multiple,u+=t,0!=Number(t)&&(k[""+this.id]=this,l=this.ball,l.length>q&&(l=l.substr(0,q)+"..."),m=g.getCurrentGame().getGameConfig().getInstance().getTitleByName(this.type).join("_"),o=$.trim(m)+$.trim(this.ball),-1==$.inArray(o,n)&&s.push('<li data-id="'+this.id+'">['+m+"] "+l+"</li>"),n.push(o))}),s.push("</ul>"),1>u&&(e.confirmIsShow=!1),f.gameTypeTitle=g.getCurrentGame().getGameConfig().getInstance().getGameTypeCn(),f.blockadeData0=s.join(""),f.amount=p(i.amountAdjust),f.username=i.username,f.amountAdjust=p(h.amount),f.amountChange=p(i.amountAdjust),f.display="",h.isTrace<1)f.currentGameNumber="第 "+g.getCurrentGame().getCurrentNumber()+" 期";else{var F=b.data.orderData.orders.length;f.currentGameNumber="第 "+h.orders[0].number+"  至  "+h.orders[F-1].number+"   共  <strong class='color-red'>"+F+"</strong></span>  期"}1==i.type?f.blockadeType="受限":2==i.type?(f.blockadeType="奖金变动",f.display="none"):f.blockadeType="奖金变动及受限",e.content=d.formatHtml(d.getHtmlbetExpired(),f),e.confirmFun=function(){var a=g.getCurrentGameMessage();if(r)return!1;for(var b=0,c=j.length;c>b;)0==Number(j[b].multiple)?(j.splice(b,1),b=b):b++;$.ajax({url:g.getCurrentGame().getGameConfig().getInstance().submitUrl(),data:JSON.stringify(h),dataType:"json",method:"POST",contentType:"application/json; charset=utf-8",beforeSend:function(){r=!0,$(".confirm").html("提交中..."),$(".closeTip").css("display","none").attr("disabled","true")},success:function(b){if(1==Number(b.isSuccess)){var c=Number(b.isTrace)>0?1:0;c>0?(b.data.tplData.url="/gameUserCenter/queryPlans?time=7",b.data.tplData.gameType="追号记录"):(b.data.tplData.url="/gameUserCenter/queryOrdersEnter?time=7",b.data.tplData.gameType="投注记录"),a.show(b),g.currentGameSubmit.clearData(),g.currentGameSubmit.afterSubmitSuccess(),setTimeout(function(){g.getCurrentGameTrace().hide(),$("html,body").animate({scrollTop:$("#J-top-game-menu").offset().top},1e3)},2e3)}else a.show(b)},complete:function(){r=!1,d.fireEvent("afterSubmit"),$(".closeTip").css("display","display").removeAttr("disabled")},error:function(){a.show({mask:!0,title:"温馨提示",content:"<div class='pop-title'><i class='ico-error'></i><h4 class='pop-text'>方案提交失败,<br />请检查网络并重新提交！</h4></div>",cancelIsShow:!0,cancelFun:function(){a.hide()}})}})},d.show($.extend(e,b)),a.util.toViewCenter(d.win.dom),$("#J-blockade-panel-main").on("click","[data-action]",function(a){{var b=$(this),d=$.trim(b.attr("data-action"));$.trim(b.parent().attr("data-id"))}switch(a.preventDefault(),d){case"blockade-detail":var e=$("#J-form-blockade-detail").attr("action",g.getCurrentGame().getGameConfig().getInstance().submitUrl()+"/showBlockadeInfo");e.html(""),$.each(j,function(){var a=this;a.lockPoint&&$('<input type="hidden" value='+c(JSON.stringify(h))+' name="data" />').appendTo(e)}),e.submit()}})},getHtmlillegalTools:function(){return this.getHtmlWaring()},rebulidsubFailed:function(a){var b=this,c={};c.mask=!0,c.closeText="关 闭",c.closeIsShow=!0,c.closeFun=function(){b.hide()},c.content=b.formatHtml(b.getHtmlbetExpired(),a.data.tplData),b.show($.extend(c,a))},getHtmlsubFailed:function(){return this.getHtmlWaring()},setTitle:function(a){var b=this,c=b.win;c.setTitle(a)},setContent:function(a,b){var c=this,d=c.win;d.setContent(a,b)},hideClose:function(){var a=this,b=a.win;b.getCloseDom().hide()},hideTitle:function(){var a=this,b=a.win;b.getTitleDom().hide()},show:function(a){var b=this,c=b.win;if(b.reSet(),"undefined"==typeof a.data&&(a.data={}),a.data.tplData="undefined"==typeof a.data.tplData?{}:a.data.tplData,a){if(a.type)return void b.doAction(a);"undefined"!=typeof a.tpl&&(a.content=b.formatHtml(a.tpl,a.data.tplData)),f&&(clearTimeout(f),f=null),b.setTitle(a.title||"温馨提示"),b.setContent(a.content||""),a.confirmText&&c.setConfirmName(a.confirmText),a.cancelText&&c.setCancelName(a.cancelText),a.closeText&&c.setCloseName(a.closeText),a.normalCloseFun&&(c.doNormalClose=a.normalCloseFun),a.confirmFun&&(c.doConfirm=a.confirmFun),a.cancelFun&&(c.doCancel=a.cancelFun),a.closeFun&&(c.doClose=a.closeFun),a.confirmIsShow&&c.showConfirmButton(),a.cancelIsShow&&c.showCancelButton(),a.closeIsShow&&c.showCloseButton(),a.hideTitle&&b.hideTitle(),a.hideClose&&b.hideClose(),a.mask&&b.mask.show(),b.limitHeight(),c.show(),a.callback&&a.callback.call(b),a.time&&(f=setTimeout(function(){b.hide(),clearTimeout(f),f=null},1e3*a.time))}},limitHeight:function(){var a=this,b=$(window).height(),c=a.getContainerDom(),d=c.outerHeight();d>b&&(c.height(Math.floor(.9*b)),c.css({overflow:"auto"}))},getContainerDom:function(){var a=this;return a.win.getContainerDom()},getContentDom:function(){var a=this;return a.win.getContentDom()},hide:function(){var a=this,b=a.win;b.hide(),a.reSet()},reSet:function(){var a=this,b=a.win;a.mask.hide(),a.setTitle("提示"),a.setContent(""),b.hideConfirmButton(),b.hideCancelButton(),b.hideCloseButton(),b.doConfirm=function(){},b.doCancel=function(){},b.doClose=function(){},b.doNormalClose=function(){},b.setConfirmName("确 认"),b.setCancelName("取 消"),b.setCloseName("关 闭"),b.reSetPosition()}},i=a.Class(h,c);i.defConfig=e,i.getInstance=function(a){return d||(d=new i(a))},a[b]=i}(phoenix,"GameMessage",phoenix.Event),function(a,b,c){var d,e={mainPanel:"#J-play-select",data:"",mainDom:".play-select",html:$('<div id="change"><ul class="play-select-title clearfix"></ul><ul class="play-select-content clearfix"></ul></div>'),resultDom:"#change .play-select-content"},f=a.Games,g={init:function(a){var b=this;f.setCurrentGameTypes(b),b.container=$(a.mainPanel),b.count=0,b.showCount=0,b.data=f.getCurrentGame().getGameConfig().getInstance().getTypes(),b.html=a.html,setTimeout(function(){b._showMainHTML(b.data)},0)},getContainerDom:function(){return this.container},_showMainHTML:function(a,b){for(var c,d=this,e=0,f=a.length;f>e;e++)c=a[e],b||d._bulidHTMl(c,"top"),"[object Array]"==Object.prototype.toString.call(c.childs)&&0!=c.childs.length?(d._showMainHTML(c.childs,!0),d._bulidHTMl(c,"child")):d._bulidHTMl(c,"terminal");b||d._appendHtml(d.html)},_bulidHTMl:function(a,b){var c=this,d=c.html.find(".play-select-title"),e=c.html.find(".play-select-content");switch(b){case"top":d.append('<li class="'+a.name+'">'+a.title+"</li>"),e.append('<li class="'+a.name+'"></li>');break;case"child":e.find("."+a.parent).append('<dl class="'+a.name+'"><dt>'+a.title+"：</dt></dl>");break;case"terminal":setTimeout(function(){e.find("."+a.mode+" ."+a.parent).append('<dd class="'+a.name+'">'+a.title+"</dd>")},0)}},_appendHtml:function(a){var b=this;$(b.defConfig.mainDom).prepend(a),b._bindTagSelect(),setTimeout(function(){b.fireEvent("endShow")},10)},_bindTagSelect:function(){var a,b=this;a=new phoenix.Tab({par:"#change",triggers:".play-select-title > li",panels:".play-select-content > li",eventType:"click",currPanelClass:"current"}),b.bigTab=a,a.addEvent("afterSwitch",function(a,c){var d=this.getTrigger(c),e=$("#change .play-select-content ."+d.attr("class").replace(/\s.*/g,"")+" dd:first");b._getMode(e)}),$("#change .play-select-content").on("click","dd",function(){b._getMode($(this))})},_getMode:function(a){var b=this,c=a.attr("class").replace(/\s.*/g,""),d=a.parent("dl").attr("class"),e=a.parents("li").eq(0).attr("class").replace(/\s.*/g,""),f=e+"."+d+"."+c;b.changeMode(f)},showTitleDom:function(){var a=this,b=a.getContainerDom(),c=b.find(".play-select-content");c.show()},hiddenTitleDom:function(){var a=this,b=a.getContainerDom(),c=b.find(".play-select-content");c.hide()},changeMode:function(a){var b,c,d,e,g=this,h=a.split("."),i=g.getContainerDom(),j="current",k=0;try{if(f.getCurrentGame().getCurrentGameMethod()&&a==f.getCurrentGame().getCurrentGameMethod().getGameMethodName())return}catch(l){}i.find(".play-select-content").is(":hidden")&&g.showTitleDom(),g.fireEvent("beforeChange",g.container,a),f.getCurrentGame().switchGameMethod(a),b=g.container.find(".play-select-title li"),b.removeClass(j),g.container.find(".play-select-title").find("."+h[0]).addClass(j),c=g.container.find(".play-select-content li"),c.removeClass(j),e=g.container.find(".play-select-content").find("."+h[0]),e.addClass(j),d=e.find("dd").removeClass(j),e.find("."+h[1]+" ."+h[2]).addClass(j),b.each(function(a){return $(this).hasClass(j)?(k=a,!1):void 0}),g.bigTab.index=k,g.fireEvent("endChange")}},h=a.Class(g,c);h.defConfig=e,h.getInstance=function(a){return d||(d=new h(a))},a[b]=h}(phoenix,"GameTypes",phoenix.Event),function(a,b,c,d){var e,f={mainPanel:"#J-balls-statistics-panel",multipleLimitDom:"#J-balls-statistics-multipleLimit",lotteryNumDom:"#J-balls-statistics-lotteryNum",multipleDom:"#J-balls-statistics-multiple",amountDom:"#J-balls-statistics-amount",moneyUnitDom:"#J-balls-statistics-moneyUnit",moneyUnit:1,moneyUnitData:{.01:"分",.1:"角",1:"元"},onePrice:2,multiple:1,multipleLimit:88},g=a.Games,h={init:function(a){var b=this;b.initControl(a)},initControl:function(b){var c=this;g.setCurrentGameStatistics(c),c.panel=$(b.mainPanel),c.moneyUnit=b.moneyUnit,c.onePrice=b.onePrice,c.multiple=b.multiple,c.multipleLimit=b.multipleLimit,c.setMultipleLimit(b.multipleLimit),c.gameMethodName="",c.lotteryData=[],c.multipleDom=new phoenix.Select({realDom:b.multipleDom,isInput:!0,expands:{inputEvent:function(){var a=this;a.getInput().keyup(function(){var b=this.value,c=g.getCurrentGameStatistics().getMoneyUnitDom().getValue(),d=g.getCurrentGameStatistics().getMultipleLimit();this.value=this.value.replace(/[^\d]/g,""),b=Number(this.value),this.value=1>b?1:1==Number(c)?b>d?d:b:b>10*d?10*d:b,a.setValue(this.value)})}}}),c.multipleDom.setValue(c.multiple),c.multipleDom.addEvent("change",function(a,b){var d=Number(b),e=g.getCurrentGameStatistics().getMoneyUnitDom().getValue(),f=g.getCurrentGameStatistics().getMultipleLimit();1==Number(e)?d>f&&(d=f,this.setValue(d)):d>10*f&&(d=10*f,this.setValue(d)),c.setMultiple(d),c.updateData({lotterys:g.getCurrentGame().getCurrentGameMethod().getLottery(),original:g.getCurrentGame().getCurrentGameMethod().getOriginal()},g.getCurrentGame().getCurrentGameMethod().getGameMethodName())}),c.moneyUnitDom=new a.Select({realDom:b.moneyUnitDom}),c.moneyUnitDom.setValue(c.moneyUnit),c.moneyUnitDom.addEvent("change",function(a,b){var d=g.getCurrentGame().getDynamicConfig().gamelimit[c.gameMethodName].maxmultiple,e=Number(b);c.setMoneyUnit(Number(b)),c.updateData({lotterys:g.getCurrentGame().getCurrentGameMethod().getLottery(),original:g.getCurrentGame().getCurrentGameMethod().getOriginal()},g.getCurrentGame().getCurrentGameMethod().getGameMethodName()),1==e?c.setMultipleLimit(d):c.setMultipleLimit(d,"jms"),c.multipleDom.setValue(1)}),c.updateData({lotterys:[],original:[]})},getMultipleDom:function(){return this.multipleDom},getMultipleTextDom:function(){return $("#J-balls-statistics-multiple-text")},setMultipleLimit:function(a,b){var c=this,e="无限制";a=Number(a),isNaN(a)&&(a=b==d?99999:999999),this.multipleLimit=a,0>a?(this.multipleLimit=b==d?99999:999999,e="无限制"):"jms"==b?999999>a&&(e=""+10*a+" 倍"):99999>a&&(e=""+a+" 倍"),c.getMultipleLimitDom().html(e)},getMultipleLimit:function(){return this.multipleLimit},getMoneyUnitText:function(a){return this.defConfig.moneyUnitData[""+a]},updateData:function(a,b){var c=this,e=(c.defConfig,a.lotterys==d?0:a.lotterys.length),f=c.onePrice,g=c.multiple,h=c.moneyUnit;c.setLotteryData(a),c.setGameMethodName(b),c.setLotteryNumDom(e),c.setAmountDom(c.formatMoney(e*h*g*f))},getResultData:function(){var a=this,b=a.getLotteryData();return b.lotterys.length<1?{}:{type:a.getGameMethodName(),original:b.original,lotterys:b.lotterys,moneyUnit:a.moneyUnit,num:b.lotterys.length,multiple:a.multiple,onePrice:a.onePrice,amount:a.formatMoney(b.lotterys.length*a.moneyUnit*a.multiple*a.onePrice),amountText:a.formatMoney(b.lotterys.length*a.moneyUnit*a.multiple*a.onePrice)}},setGameMethodName:function(a){this.gameMethodName=a},getGameMethodName:function(){return this.gameMethodName},setMoneyUnit:function(a){var b=this;b.moneyUnit=a},getMoneyUnit:function(){return this.moneyUnit},getLotteryData:function(){return this.lotteryData},setLotteryData:function(a){var b=this;b.lotteryData=a},formatMoney:function(a){var a=Number(a),b=/(-?\d+)(\d{3})/;for(a=Number.prototype.toFixed?a.toFixed(2):Math.round(100*a)/100,a=""+a;b.test(a);)a=a.replace(b,"$1,$2");return a},ToForamtmoney:function(a){return parseFloat(a.replace(/[^\d\.-]/g,""))},getMultipleLimitDom:function(){var a=this,b=a.defConfig;return a.multipleLimitDom||(a.multipleLimitDom=$(b.multipleLimitDom))},getLotteryNumDom:function(){var a=this,b=a.defConfig;return a.lotteryNumDom||(a.lotteryNumDom=$(b.lotteryNumDom))},setLotteryNumDom:function(a){var b=this;b.getLotteryNumDom().html(a)},getMultipleDom:function(){return this.multipleDom},getMultip:function(){var a=this;return a.multiple},setMultipleDom:function(a){var b=this;b.getMultipleDom().setValue(a)},setMultiple:function(a){this.multiple=a},getMoneyUnitDom:function(){return this.moneyUnitDom},setMoneyUnitDom:function(a){var b=this;b.getMoneyUnitDom().setValue(a)},hidesetMoneyUnitDom:function(){this.moneyUnitDom.hide()},getOnePrice:function(){var a=this;return a.onePrice},getAmountDom:function(){var a=this,b=a.defConfig;return a.amountDom||(a.amountDom=$(b.amountDom))},setAmountDom:function(a){var b=this;b.getAmountDom().html(a)},reSet:function(){{var a=this;a.defConfig}a.fireEvent("afterStatisReset")}},i=a.Class(h,c);i.defConfig=f,i.getInstance=function(a){return e||(e=new i(a))},a[b]=i}(phoenix,"GameStatistics",phoenix.Event),function(a,b,c){var d,e={containerDom:"#J-balls-order-container",totalLotterysNumDom:"#J-gameOrder-lotterys-num",totalAmountDom:"#J-gameOrder-amount",selectedClass:"game-order-current",rowTemplate:'<li data-param="action=reselect&id=<#=id#>" id="gameorder-<#=id#>"><div class="result"><span class="moneyUnitText"><#=moneyUnitText#></span><span class="bet"><#=num#>注</span><span class="multiple"><#=multiple#>倍</span><span class="price"><span><dfn>&yen;</dfn></span><#=amountText#></span><span class="close"><a data-param="action=del&id=<#=id#>" href="javascript:void(0);" title="删除">删除</a></span></div><span>[<#=typeText#>]</span><span style="position:relative" ><#=lotterysText#></span></li>',lotterysTextLength:20,addOrderDom:"#J-add-order"},f=a.Games,g=1,h=(Object.prototype.toString,function(a){for(var b,c=$.trim(a).split("&"),d=0,e=c.length,f={};e>d;d++)b=c[d].split("="),b.length>0&&(f[b[0]]=2==b.length?b[1]:"");return f}),i={init:function(a){var b=this,a=b.defConfig;b.cacheData={},b.cacheData.detailPostParameter={},b.orderData=[],f.setCurrentGameOrder(b),b.container=$(a.containerDom),b.totalLotterysNum=0,b.totalLotterysNumDom=$(a.totalLotterysNumDom),b.totalAmount=0,b.totalAmountDom=$(a.totalAmountDom),b.currentSelectId=0,b.eventProxy(),b.addEvent("afterAdd",function(){f.getCurrentGameTrace().getRowTableType();f.getCurrentGameTrace().isOpen()&&f.getCurrentGameTrace().updateOrder()}),b.addEvent("afterRemoveData",function(){f.getCurrentGameTrace().getRowTableType();f.getCurrentGameTrace().isOpen()&&f.getCurrentGameTrace().updateOrder()}),b.addEvent("afterResetData",function(){f.getCurrentGameTrace().getRowTableType();f.getCurrentGameTrace().updateOrder(!0)}),f.getCurrentGameTypes().addEvent("endChange",function(){b.cancelSelectOrder()})},setTotalLotterysNum:function(a){var b=this;b.totalLotterysNum=Number(a),b.totalLotterysNumDom.html(a)},setTotalAmount:function(a){var b=this;b.totalAmount=Number(a),b.totalAmountDom.html(b.formatMoney(a))},addData:function(a){var b=this;b.orderData.unshift(a)},getOrderById:function(a){var b=this,a=Number(a),c=b.orderData,d=0,e=c.length;for(d=0;e>d;d++)if(Number(c[d].id)==a)return c[d]},removeData:function(a){for(var b=this,a=Number(a),c=b.orderData,d=0,e=c.length;e>d;d++)if(c[d].id==a){b.fireEvent("beforeRemoveData",c[d]),b.orderData.splice(d,1),b.updateData(),b.fireEvent("afterRemoveData");break}$("#gameorder-"+a).remove(),b.fireEvent("afterRemoveData")},reSet:function(){var a=this;return a.container.empty(),a.orderData=[],a.updateData(),a.fireEvent("afterResetData"),a},updateData:function(){var a=this,b=a.getTotal();a.setTotalLotterysNum(b.count),a.setTotalAmount(b.amount)},getTotal:function(){for(var a=this,b=a.orderData,c=0,d=b.length,e=0,f=0;d>c;c++)e+=b[c].num,f+=b[c].num*b[c].onePrice*b[c].moneyUnit*b[c].multiple;return{count:e,amount:f,orders:b}},getOrderMaxMultiple:function(){for(var a,b,c,d,e=this,g=f.getCurrentGame().getDynamicConfig().gamelimit,h=e.getTotal().orders,i=0,j=h.length,k=[],l="";j>i;i++)a=h[i].type,b=h[i].multiple,d=Number(h[i].moneyUnit),g[a]?1==d?(c=Number(g[a].maxmultiple)<0?99999:Number(g[a].maxmultiple),k.push({gameMethod:a,maxnum:Math.floor(c/b)})):(c=Number(g[a].maxmultiple)<0?999999:Number(g[a].maxmultiple),k.push({gameMethod:a,maxnum:Math.floor(10*c/b)})):(l=f.getCurrentGame().getGameConfig().getInstance().getTitleByName(a),1==d?(c=99999,k.push({gameMethod:a,maxnum:Math.floor(c/b)})):(c=999999,k.push({gameMethod:a,maxnum:Math.floor(10*c/b)})));return k.sort(function(a,b){return a.maxnum-b.maxnum}),k.length>0?k[0]:{gameMethod:"",maxnum:1e5}},add:function(a){var b,c=this,d="",e=-1,h=c.defConfig.rowTemplate,i=0,j=f.getCurrentGameTrace().isOpen();if(c.fireEvent("beforeAdd",a),!(a.lotterys&&a.lotterys.length>0)){var k=f.getCurrentGameMessage();return void((!a.original||a.original.length<=0)&&k.show({type:"mustChoose",msg:'<span class="color-red">&nbsp;号码选择不完整，请重新选择！</span>',data:{tplData:{msg:'<span class="color-red">&nbsp;号码选择不完整，请重新选择！</span>'}}}))}if(c.currentSelectId>0)a.id=c.currentSelectId;else{if(e=c.checkData(a),-1!=e)return c.addMultiple(a.multiple,e),f.getCurrentGameMessage().show({type:"normal",closeText:"关闭",closeFun:function(){this.hide()},data:{tplData:{msg:"您选择的号码在号码篮已存在，将直接进行倍数累加"}}}),f.getCurrentGame().getCurrentGameMethod().reSet(),f.getCurrentGameStatistics().reSet(),c.updateData(),void c.fireEvent("afterAdd",a);a.id=g++}if(a.multiple=j?1:a.multiple,a.amountText=c.formatMoney(a.num*a.moneyUnit*a.multiple*a.onePrice),j&&("yingli"==f.getCurrentGameTrace().getRowTableType()||"yinglilv"==f.getCurrentGameTrace().getRowTableType()))for(i=0,b=c.orderData.length;b>i;i++)if(c.orderData[i].type!=a.type||c.orderData[i].moneyUnit!=a.moneyUnit)return void alert("盈利追号和盈利率追号不允许混投，\n 请确保玩法类型和元角模式一致");a.postParameter=f.getCurrentGame().getCurrentGameMethod().makePostParameter(a.original,a),a.oldMultiple=a.multiple,d=c.formatRow(h,c.rebuildData(a)),c.currentSelectId>0?c.replaceOrder(a.id,a):c.addData(a),c.currentSelectId>0?($(d).replaceAll($("#gameorder-"+c.currentSelectId)),c.cancelSelectOrder()):$(d).prependTo(c.container),f.getCurrentGame().getCurrentGameMethod().reSet(),f.getCurrentGameStatistics().reSet(),c.updateData(),c.fireEvent("afterAdd",a)},replaceOrder:function(a,b){for(var c=this,d=c.orderData,e=0,f=d.length;f>e;e++)if(d[e].id==a)return void(d[e]=b)},render:function(){for(var a=this,b=a.getTotal().orders,c=0,d=b.length,e=[],f=a.defConfig.rowTemplate;d>c;c++)e[c]=a.formatRow(f,a.rebuildData(b[c]));a.updateData(),a.container.html(e.join(""))},rebuildData:function(a){var b=this,c=b.defConfig,d=f.getCurrentGame().getGameConfig().getInstance(),e=d.getTitleByName(a.type);return a.typeText=e.join("_"),a.lotterysText=a.postParameter.length>c.lotterysTextLength?a.postParameter.substr(0,c.lotterysTextLength)+'... <span data-param="action=detail&id='+a.id+'" class="lottery-details">详情</span><div class="lottery-details-area"><div class="num"><span class="multiple"></span><em data-param="action=detailhide" class="close">×</em></div><div class="list"></div></div>':a.postParameter,a.moneyUnitText=f.getCurrentGameStatistics().getMoneyUnitText(a.moneyUnit),a},formatRow:function(a,b){var c,d,e=b;for(c in e)e.hasOwnProperty(c)&&(d=RegExp("<#="+c+"#>","g"),a=a.replace(d,e[c]));return a},originalData:function(a){for(var b=this,c=[],d=0;d<a.length;d++)for(var e=0;e<a[d].length;e++)c[e]=c[e]||[],b.arrIndexOf(a[d][e],c[e])||c[e].push(a[d][e]);return c},arrIndexOf:function(a,b){for(var c,d=0;d<b.length;d++)b[d]==a&&(c=!0);return c||!1},checkData:function(a){var b,c,d=this,e=[],f=0;c=a.type,b=a.original;for(var f=0;f<b.length;f++)e.push(b[f].join(""));return moneyUnit=a.moneyUnit,d.searchSameResult(c,e.join(),moneyUnit)},eventProxy:function(){var a=this,b=a.container;b.click(function(b){var c,d=b.target.getAttribute("data-param");d&&""!=$.trim(d)&&(c=h(d),$.isFunction(a["exeEvent_"+c.action])&&a["exeEvent_"+c.action].call(a,c,b.target))})},exeEvent_del:function(a){var b=this,c=Number(a.id);b.currentSelectId==c&&(f.getCurrentGame().getCurrentGameMethod().reSet(),b.cancelSelectOrder()),b.removeData(c)},exeEvent_detailhide:function(a,b){var c=this;$(b).parents(".lottery-details-area").eq(0).hide(),c.fireEvent("afterDetailHide")},exeEvent_detail:function(a,b){var c=this,b=$(b),d=Number(a.id),e=d,f=b.next(),g=f.find(".multiple"),h=f.find(".list"),i=c.getTotal().orders,j="";c.cacheData.currentDetailId&&$("#gameorder-"+c.cacheData.currentDetailId+" .lottery-details-area").hide();for(var k=i.length-1;k>=0;k--)if(i[k].id==d){i=i[k];break}g.text("共 "+i.num+" 注"),j=i.postParameter,c.cacheData.currentDetailId=e,f.css({left:f.position().left+f.width()+5}),h.html(j),f.show(),c.fireEvent("afterDetailShow")},exeEvent_reselect:function(a){var b=this,c=Number(a.id);b.selectOrderById(c)},updateDomStatus:function(){var a=this,b="important",c=a.currentSelectId,d=$(a.defConfig.addOrderDom);c>0?d.addClass(b):d.removeClass(b)},selectOrderById:function(a){var b=this,c=b.getOrderById(a),d=c.original,e=c.type,g=b.defConfig.selectedClass,h=$("#gameorder-"+a);-1==b.getOrderById(a).type.indexOf("danshi")&&(h.parent().children().removeClass(g),h.addClass(g),f.getCurrentGameTypes().changeMode(e),f.getCurrentGameStatistics().getMoneyUnitDom().setValue(c.moneyUnit),f.getCurrentGameStatistics().getMultipleDom().setValue(c.multiple),f.getCurrentGame().getCurrentGameMethod().reSelect(d),b.currentSelectId=a,b.updateDomStatus())},cancelSelectOrder:function(){{var a=this,b=a.currentSelectId;$(a.defConfig.addOrderDom)}b>0&&($("#gameorder-"+b).removeClass(a.defConfig.selectedClass),a.currentSelectId=0,a.updateDomStatus(),f.getCurrentGame().getCurrentGameMethod().reSet())},formatMoney:function(a){var a=Number(a),b=/(-?\d+)(\d{3})/;for(a=Number.prototype.toFixed?a.toFixed(2):Math.round(100*a)/100,a=""+a;b.test(a);)a=a.replace(b,"$1,$2");return a},searchSameResult:function(a,b,c){for(var d,e=this,f=0,g=[],h=e.getTotal().orders;f<h.length;f++){g=[],d=h[f],ordersLotteryText=d.original;for(var i=0;i<ordersLotteryText.length;i++)g.push(ordersLotteryText[i].join(""));if(d.type==a&&b==g.join()&&d.moneyUnit==c)return f}return-1},addMultiple:function(a,b){var c,d=this,e=d.getTotal().orders,g=e[b],h=g.type,i=999999;if(!f.getCurrentGameTrace().isOpen()){if(c=f.getCurrentGame().getDynamicConfig().gamelimit,c[h]&&(i=1==g.moneyUnit?c[h].maxmultiple:10*c[h].maxmultiple,i=0>i?99999:i),g.multiple+a>i)return void setTimeout(function(){f.getCurrentGameMessage().show({type:"normal",closeText:"确定",closeFun:function(){console.log(f),e[b].multiple=i,e[b].oldMultiple=e[b].multiple,e[b].amount=e[b].num*e[b].moneyUnit*e[b].multiple*e[b].onePrice,e[b].amountText=d.formatMoney(e[b].num*e[b].moneyUnit*e[b].multiple*e[b].onePrice),d.render(),f.getCurrentGame().getCurrentGameMethod().reSet(),f.getCurrentGame().getCurrentGameMethod().ballsErrorTip(),f.getCurrentGameStatistics().reSet(),this.hide()},data:{tplData:{msg:"该组号码倍数已经超过最大限制("+i+"倍)，将调整为系统支持的最大倍数进行添加"}}})},100);e[b].multiple+=a,e[b].oldMultiple=e[b].multiple,e[b].amount=e[b].num*e[b].moneyUnit*e[b].multiple*e[b].onePrice,e[b].amountText=d.formatMoney(e[b].num*e[b].moneyUnit*e[b].multiple*e[b].onePrice),d.render(),f.getCurrentGame().getCurrentGameMethod().reSet(),f.getCurrentGame().getCurrentGameMethod().ballsErrorTip(),d.cancelSelectOrder()}},editMultiples:function(a){for(var b=this,c=b.getTotal().orders,d=0,e=c.length;e>d;d++)c[d].multiple=a,c[d].amount=c[d].num*c[d].moneyUnit*c[d].multiple*c[d].onePrice,c[d].amountText=b.formatMoney(c[d].amount);b.render(),b.cancelSelectOrder()},editMultiple:function(a,b){var c=this,d=c.getTotal().orders;d[b].multiple=a,d[b].amount=d[b].num*d[b].moneyUnit*d[b].multiple*d[b].onePrice,d[b].amountText=c.formatMoney(d[b].amount),c.render(),c.cancelSelectOrder()},restoreMultiples:function(){for(var a=this,b=a.getTotal().orders,c=0,d=b.length;d>c;c++)b[c].multiple=b[c].oldMultiple,b[c].amount=b[c].num*b[c].moneyUnit*b[c].multiple*b[c].onePrice,b[c].amountText=a.formatMoney(b[c].amount);a.render(),a.cancelSelectOrder()}},j=a.Class(i,c);j.defConfig=e,j.getInstance=function(a){return d||(d=new j(a))},a[b]=j}(phoenix,"GameOrder",phoenix.Event),function(a,b,c){var d,e={mainPanel:"#J-trace-panel",advancedTypeHas:["fanbei","yingli","yinglilv"],dataRowHeader:'<tr><th style="width:125px;" class="text-center">序号</th><th><input data-action="checkedAll" type="checkbox"  checked="checked"/> 追号期次</th><th>倍数</th><th>金额</th><th>预计开奖时间</th></tr>',dataRowTemplate:'<tr><td class="text-center"><#=No#></td><td><input data-action="checkedRow" class="trace-row-checked" type="checkbox" checked="checked"> <span class="trace-row-number" issueCode=<#=issueCode#>><#=traceNumber#></span></td><td><input class="trace-row-multiple" value="<#=multiple#>" type="text" style="width:30px;text-align:center;"> 倍</td><td><span class="price"><dfn>&yen;</dfn><span class="trace-row-money"><#=money#></span> 元</span> </td><td><span class="trace-row-time"><#=publishTime#></span></td></tr>',dataRowYingliHeader:'<tr><th class="text-center">序号</th><th><input data-action="checkedAll" type="checkbox" /> 追号期次</th><th>倍数</th><th>金额</th><th>奖金</th><th>预期盈利金额</th><th>预期盈利率</th></tr>',dataRowYingliTemplate:'<tr><td class="text-center"><#=No#></td><td><input data-action="checkedRow" class="trace-row-checked" type="checkbox" checked="checked"> <span class="trace-row-number" issueCode=<#=issueCode#>><#=traceNumber#></span></td><td><input class="trace-row-multiple" value="<#=multiple#>" type="text" style="width:30px;text-align:center;"> 倍</td><td><span class="price"><dfn>&yen;</dfn><span class="trace-row-money"><#=money#></span> 元</span></td><td><span class="price"><dfn>&yen;</dfn> <span class="trace-row-userGroupMoney"><#=userGroupMoney#></span> </span>元</td><td><span class="price"><dfn>&yen;</dfn> <span class="trace-row-winTotalAmount"><#=winTotalAmout#></span> 元</span></td><td><span class="trace-row-yinglilv"><#=yinglilv#></span>%</td></tr>'},f=a.Games,g=function(a,b,c){var a=""+a,c=c||1e9;return a=a.replace(/[^\d]/g,""),a=""==a?b:Number(a)>c?c:a,Number(a)},h=function(a){return a=a.replace(/[^\d]/g,""),Number(a)},j={init:function(a){var b=this;f.setCurrentGameTrace(b),b.panel=$(a.mainPanel),b.TraceTab=null,b.TraceAdvancedTab=null,b.isOpenPanel=!1,b.orderData=null,b.traceType="normal",b.times=0,b.traceStartNumber="",b.currentTraceNumber="",b.advancedType=a.advancedTypeHas[0],b.typeTypeType="a",b.initEvent(),b.setCurrentTraceNumber(),f.getCurrentGame().addEvent("changeDynamicConfig",function(){b.buildStartNumberSelectDom(),b.updateTableNumber()})},setAdvancedType:function(a){this.advancedType="[object Number]"==Object.prototype.toString.call(a)?this.getAdvancedTypeBuIndex(a):a},getAdvancedType:function(){return this.advancedType},getAdvancedTypeBuIndex:function(a){var b=this,c=b.defConfig.advancedTypeHas,d=c.length;return d>a?c[a]:""},initEvent:function(){var b=this;$("#J-trace-switch").click(function(){if(this.checked){var a=f.getCurrentGameOrder().getTotal().amount,b=f.getCurrentGameMessage();if(0>=a)return b.show({type:"mustChoose",msg:"请至少选择一注投注号码！",data:{tplData:{msg:"请至少选择一注投注号码！"}}}),void($("#J-trace-switch").get(0).checked=!1);f.getCurrentGameTrace().show()}else f.getCurrentGameTrace().hide()}),b.TraceTab=TraceTab=new a.Tab({par:"#J-trace-panel",triggers:".chase-tab-t",panels:".chase-tab-content",currPanelClass:"chase-tab-content-current",eventType:"click"}),TraceTab.addEvent("afterSwitch",function(a,c){var d=["normal","advanced"];c<d.length&&b.setTraceType(d[c]),b.updateStatistics()}),b.TraceAdvancedTab=TraceAdvancedTab=new a.Tab({par:"#J-trace-advanced-type-panel",triggers:".tab-title li",panels:".tab-content li",eventType:"click"}),TraceAdvancedTab.addEvent("afterSwitch",function(a,c){var d=this.getPanel(c).find(".trace-advanced-type-switch");b.setAdvancedType(c),d.each(function(){return this.checked?(b.setTypeTypeType($(this).parent().attr("data-type")),!1):void 0})});var c=new a.Hover({triggers:"#J-trace-iswintimesstop-hover",panels:"#chase-stop-tip-1",currPanelClass:"chase-stop-tip-current",hoverDelayOut:300});$("#chase-stop-tip-1").mouseleave(function(){c.hide()});var d=new a.Hover({triggers:"#J-trace-iswinstop-hover",panels:"#chase-stop-tip-2",currPanelClass:"chase-stop-tip-current",hoverDelayOut:300});$("#chase-stop-tip-2").mouseleave(function(){d.hide()}),$("#J-chase-stop-switch-1").click(function(a){a.preventDefault(),$("#J-trace-iswintimesstop-panel").hide(),$("#J-trace-iswinstop-panel").show(),$("#J-trace-iswintimesstop").get(0).checked=!1,$("#J-trace-iswinstop").get(0).checked=!0,$("#J-trace-iswinstop-money").removeAttr("disabled"),$("#J-trace-iswintimesstop-times").attr("disabled","disabled")}),$("#J-chase-stop-switch-2").click(function(a){a.preventDefault(),$("#J-trace-iswinstop-panel").hide(),$("#J-trace-iswintimesstop-panel").show(),$("#J-trace-iswintimesstop").get(0).checked=!0,$("#J-trace-iswinstop").get(0).checked=!1,$("#J-trace-iswinstop-money").attr("disabled","disabled"),$("#J-trace-iswintimesstop-times").removeAttr("disabled")}),$("#J-trace-iswinstop-money").keyup(function(){this.value=g(this.value,1,999999)}),$("#J-trace-iswintimesstop-times").keyup(function(){this.value=g(this.value,1,999999)}),$("#J-trace-iswintimesstop").click(function(){var a=$("#J-trace-iswintimesstop-times");
this.checked?a.attr("disabled",!1).focus():a.attr("disabled","disabled")}),$("#J-trace-iswinstop").click(function(){var a=$("#J-trace-iswinstop-money");this.checked?a.attr("disabled",!1).focus():a.attr("disabled","disabled")}),$("#J-trace-normal-times").keyup(function(){var a,c=f.getCurrentGame().getDynamicConfig().tracemaxtimes,d=""+this.value,g=$("#J-function-select-tab").find(".function-select-title li"),h="current";d=d.replace(/[^\d]/g,""),d=""==d?1:Number(d)>c?c:d,this.value=d,a=Number(d),a>0&&20>=a&&a%5==0?(g.removeClass(h).eq(a/5-1).addClass(h),e.index=a/5-1):(g.removeClass(h),e.index=22),b.buildDetail()});var e=new a.Tab({par:"#J-function-select-tab",triggers:".function-select-title li",panels:".function-select-panel li",eventType:"click",index:1});e.addEvent("afterSwitch",function(a,c){var d=this,e=parseInt(d.getTrigger(c).text());$("#J-trace-normal-times").val(e),b.buildDetail()}),b.normalSelectMultiple=new a.Select({realDom:"#J-trace-normal-multiple",isInput:!0,expands:{inputEvent:function(){var a=this;a.getInput().keyup(function(){var b=this.value,c=99999;this.value=this.value.replace(/[^\d]/g,""),b=Number(this.value),1>b&&(this.value=1),b>c&&(this.value=c),a.setValue(this.value)})}}}),b.normalSelectMultiple.addEvent("change",function(a,c){var d=b.getOrderData().amount,e=Number(c),g=f.getCurrentGameOrder().getOrderMaxMultiple(),h=g.maxnum,i=f.getCurrentGameMessage(),j="";e>h?(j=f.getCurrentGame().getGameConfig().getInstance().getTitleByName(g.gameMethod).join("-"),i.show({confirmIsShow:!0,mask:!0,msg:"",tpl:'<div class="pop-waring"><i class="ico-waring &lt;#=icon-class#&gt;"></i><h4 class="pop-text"><#=msg#></h4></div>',data:{tplData:{msg:"您输入的倍数超过了<b>["+j+"]</b> 玩法的最高倍数限制，系统将自动修改为最大可输入倍数"}},confirmFun:function(){c=h,b.normalSelectMultiple.setValue(c),i.hide(),b.getTable().find(".trace-row-multiple").val(c),b.getTable().find(".trace-row-money").each(function(){{var a=$(this);Number(a.parent().parent().find(".trace-row-multiple").val())}a.html(b.formatMoney(d*Number(c)))}),b.updateStatistics()}})):(b.getTable().find(".trace-row-multiple").val(c),b.getTable().find(".trace-row-money").each(function(){{var a=$(this);Number(a.parent().parent().find(".trace-row-multiple").val())}a.html(b.formatMoney(d*Number(c)))}),b.updateStatistics())}),b.panel.find(".chase-table").keyup(function(a){var c=$(a.target),d=b.getOrderData().amount;if(c.hasClass("trace-row-multiple")){var e=Number(c.val()),g=b.getRowTableType(),h=Number(f.getCurrentGameOrder().getOrderMaxMultiple().maxnum);0==e?(c.val(c.val().replace(/^0/g,"")),c.parent().parent().find(".trace-row-money").html("0.00")):e>h?(e=h,c.val(e),c.parent().parent().find(".trace-row-money").html(b.formatMoney(d*e))):(c.parent().parent().find(".trace-row-money").html(b.formatMoney(d*e)),("trace_advanced_yingli_a"==g||"trace_advanced_yingli_b"==g||"trace_advanced_yinglilv_a"==g||"trace_advanced_yinglilv_b"==g)&&b.rebuildYinglilvRows()),b.updateStatistics()}}).on("blur",".trace-row-multiple",function(a){var c=$(a.target),d=(Number(c.val()),b.getOrderData().amount);c.val(g(c.val(),1,f.getCurrentGameOrder().getOrderMaxMultiple().maxnum)),c.parent().parent().find(".trace-row-money").html(b.formatMoney(d*Number(c.val()))),b.updateStatistics()}),setTimeout(function(){var a=f.getCurrentGame().getGameConfig().getInstance().defConfig.gameType;"slmmc"!=$.trim(a)&&b.buildStartNumberSelectDom()},10),$("#J-trace-advanced-times").keyup(function(){this.value=g(this.value,10,Number($("#J-trace-number-max").text()))}),$("#J-trace-advance-multiple").keyup(function(a){var b=$(a.target),c=Number(h(b.val())),d=Number(f.getCurrentGameOrder().getOrderMaxMultiple().maxnum);b.val(0==c?b.val().replace(/^0/g,""):c>d?d:c)}).blur(function(){this.value=g(this.value,1,f.getCurrentGameOrder().getOrderMaxMultiple().maxnum)}),b.panel.find(".trace-advanced-type-switch").click(function(){var a,c=$(this),d=c.parent(),e=d.parent().children();e.each(function(h){a=e.get(h),d.get(0)!=a?$(a).find('input[type="text"]').attr("disabled","disabled"):($(a).find('input[type="text"]').attr("disabled",!1).eq(0).focus(),b.setTypeTypeType(d.attr("data-type"))),this.value=c.parent().hasClass("trace-input-multiple")?g(this.value,1,f.getCurrentGameOrder().getOrderMaxMultiple().maxnum):g(this.value,1,99999)})}),$("#J-trace-advanced-type-panel").on("keyup","input[type=text]",function(a){var b=$(a.target);this.value=b.hasClass("trace-input-multiple")?g(this.value,1,f.getCurrentGameOrder().getOrderMaxMultiple().maxnum):g(this.value,1,99999)}),$("#J-trace-builddetail").click(function(){b.confirmSetting()}),b.panel.find(".chase-table").click(function(a){var c,d=$(a.target),e=$.trim(d.attr("data-action")),f=!0;if(e&&""!=e)switch(e){case"checkedAll":f=d.get(0).checked?!0:!1,c=b.getRowTableType(),b.getTable().find(".trace-row-checked").each(function(){this.checked=f}),("trace_advanced_yingli_a"==c||"trace_advanced_yingli_b"==c||"trace_advanced_yinglilv_a"==c||"trace_advanced_yinglilv_b"==c)&&b.rebuildYinglilvRows(),b.updateStatistics();break;case"checkedRow":d.size()>0&&(c=b.getRowTableType(),("trace_advanced_yingli_a"==c||"trace_advanced_yingli_b"==c||"trace_advanced_yinglilv_a"==c||"trace_advanced_yinglilv_b"==c)&&b.rebuildYinglilvRows(),b.updateStatistics())}})},buildStartNumberSelectDom:function(){var b,c=this,d=f.getCurrentGame().getDynamicConfig().gamenumbers,e=d.length,g=0,h=[],i=f.getCurrentGame().getCurrentNumber(),j="(当前期)",k=j,l="";for(c.traceStartNumberSelect&&(b=c.traceStartNumberSelect.getValue());e>g;g++)k=i==d[g].number?j:"",l=c.traceStartNumberSelect&&d[g].number==b?' selected="selected" ':"",h.push('<option value="'+d[g].number+'" '+l+" >"+d[g].number+k+"</option>");$("#J-traceStartNumber").html(h.join("")),$("#J-trace-number-max").text(e),c.traceStartNumberSelect&&c.traceStartNumberSelect.dom.remove(),c.traceStartNumberSelect=new a.Select({realDom:"#J-traceStartNumber",cls:"chase-trace-startNumber-select"}),c.traceStartNumberSelect.addEvent("change",function(a,b){c.setTraceStartNumber(b)})},updateTableNumber:function(){var a,b,c,d,e,g,h,i,j,k=this,l=f.getCurrentGame().getDynamicConfig().gamenumbers,m=l.length,n=f.getCurrentGame().getCurrentNumber(),o="",p="",q='<span class="icon-period-current"></span>',r=0,s=0,t=f.getCurrentGame().getGameConfig().getInstance().defConfig.gameType;m>0&&(a=k.getNormalRowTable().find("tr"),b=k.getAdvancedRowTable().find("tr"),h=k.getStartNumberIndexByNumber(c),a.each(function(a){if(0==a)return!0;if(d=$(this),e=d.find(".trace-row-number"),issuecodeNumber=d.find(".trace-row-number").attr("issuecode"),g=d.find(".trace-row-time"),multipleDom=d.find(".trace-row-multiple"),c=e.text().replace(/[^\d]/g,""),i=d.find(".text-center"),d.find(".trace-row-multiple").removeAttr("disabled"),m>h+1){if(o=l[h+1].number==n?q:"",e.html(l[h+1].number+o),multipleDom.val("1"),g.text(l[h+1].time),i.html("").html(a),p!=issuecodeNumber.substr(0,8)&&""!=p&&"fc3d"!=t&&"p5"!=t&&"ssq"!=t){switch(r){case 0:j="明天 ";break;case 1:j="后天 ";break;case 2:j="大后天 ";break;default:j=""}r++,""!=jQuery.trim(j)&&i.html("").append('<div class="icon-chase-mark">'+j+" "+d.find(".trace-row-number").text().substr(0,8)+"</div>")}p=issuecodeNumber.substr(0,8),h++}}),h=k.getStartNumberIndexByNumber(c),b.each(function(a){if(0==a)return!0;if(d=$(this),e=d.find(".trace-row-number"),issuecodeNumber=d.find(".trace-row-number").attr("issuecode"),g=d.find(".trace-row-time"),multipleDom=d.find(".trace-row-multiple"),c=e.text().replace(/[^\d]/g,""),i=d.find(".text-center"),d.find(".trace-row-multiple").removeAttr("disabled"),m>h+1){if(o=l[h+1].number==n?q:"",e.html(l[h+1].number+o),multipleDom.val("1"),g.text(l[h+1].time),i.html("").html(a),p!=issuecodeNumber.substr(0,8)&&""!=p&&"fc3d"!=t&&"p5"!=t&&"ssq"!=t){switch(s){case 0:j="明天 ";break;case 1:j="后天 ";break;case 2:j="大后天 ";break;default:j=""}s++,""!=jQuery.trim(j)&&i.html("").append('<div class="icon-chase-mark">'+j+" "+d.find(".trace-row-number").text().substr(0,8)+"</div>")}p=issuecodeNumber.substr(0,8),h++}}))},rebuildYinglilvRows:function(){var a=this,b=a.getRowTable().find("tr"),c=a.getOrderData(),d=a.getWinMoney(),e=null,f=null,g=null,h=1,i=null,j=0,k=null,l=null,m=null,n=-1;costAmount=0,b.each(function(b){b>0&&(e=$(this),f=e.find(".trace-row-checked"),f.size()>0&&f.get(0).checked&&(g=e.find(".trace-row-multiple"),h=Number(g.val()),i=e.find(".trace-row-money"),j=Number(i.text().replace(",","")),k=e.find(".trace-row-userGroupMoney"),l=e.find(".trace-row-winTotalAmount"),m=e.find(".trace-row-yinglilv"),costAmount+=c.amount*h,i.text(a.formatMoney(c.amount*h)),k.text(a.formatMoney(d*h)),l.text(a.formatMoney(d*h-costAmount)),n=(d*h-costAmount)/costAmount*100,m.text(Number(n).toFixed(2))))})},isOpen:function(){return this.isOpenPanel},setTypeTypeType:function(a){this.typeTypeType=a},getTypeTypeType:function(){return this.typeTypeType},getIsWinStop:function(){var a=$("#J-trace-iswintimesstop"),b=$("#J-trace-iswinstop");return a.get(0).checked?1:b.get(0).checked?2:0},getTraceWinStopValue:function(){var a=this,b=a.getIsWinStop();return 1==b?Number($("#J-trace-iswintimesstop-times").val()):2==b?Number($("#J-trace-iswinstop-money").val()):-1},updateStatistics:function(){var a=this,b=a.getResultData();$("#J-trace-statistics-times").html(b.times),$("#J-trace-statistics-lotterys-num").html(b.lotterysNum),$("#J-trace-statistics-amount").html(a.formatMoney(b.amount))},getResultData:function(){var a,b,c,d,e,g,h=this,i=h.getOrderData(),j=h.getRowTable().find("tr"),k=0,l=0,m=0,n=[],o={times:0,lotterysNum:0,amount:0,orderData:i,traceData:[],traceType:h.getTraceType()},p="",q=f.getCurrentGame().getDynamicConfig().gamenumbers,r=0,s=f.getCurrentGame().getGameConfig().getInstance().defConfig.gameType;return j.each(function(f){if(0!=f){if(a=$(this),b=a.find(".trace-row-checked"),tracenumber=a.find(".trace-row-number").attr("issuecode"),traceNo=a.find(".text-center"),traceNo.html("").html(f),p!=tracenumber.substr(0,8)&&""!=p&&"fc3d"!=s&&"p5"!=s&&"ssq"!=s){switch(r){case 0:g="明天 ";break;case 1:g="后天 ";break;case 2:g="大后天 ";break;default:g=""}""!=jQuery.trim(g)&&traceNo.html("").append('<div class="icon-chase-mark">'+g+" "+a.find(".trace-row-number").text().substr(0,8)+"</div>"),r++}p=tracenumber.substr(0,8),b.size()>0&&b.get(0).checked?(c=b.parent(),e=h.getStartNumberIndexByNumber(c.find(".trace-row-number").text()),e=-1==e?0:e,d=q[e].issueCode,a.find(".trace-row-multiple").removeAttr("disabled"),"0"==a.find(".trace-row-multiple").val()&&(a.find(".trace-row-multiple").val("1"),a.find(".trace-row-money").text(h.formatMoney(1*i.amount))),n.push({traceNumber:c.find(".trace-row-number").text(),issueCode:d,multiple:Number(c.parent().find(".trace-row-multiple").val())}),k++,m+=Number(a.find(".trace-row-money").text().replace(/,/g,""))):(a.find(".trace-row-money").text("0"),a.find(".trace-row-multiple").val("0"),a.find(".trace-row-multiple").attr("disabled","disabled").css("border-color","#CECECE"))}}),i&&(l=k*i.count,o={times:k,lotterysNum:l,amount:m,orderData:i,traceData:n,traceType:h.getTraceType()}),o},updateOrder:function(a){var b=this,c=f.getCurrentGameOrder().getTotal(),d=b.getRowTableType(),e=f.getCurrentGameOrder().getOrderMaxMultiple(),g=e.maxnum,h=Number(b.normalSelectMultiple.getValue()),i=Number($("#J-trace-advance-multiple").val());b.setOrderData(c),h>g&&b.normalSelectMultiple.setValue(g),i>g&&$("#J-trace-advance-multiple").val(g),a||"trace_advanced_fanbei_a"!=d&&"trace_advanced_fanbei_b"!=d&&"trace_advanced_yingli_a"!=d&&"trace_advanced_yingli_b"!=d&&"trace_advanced_yinglilv_a"!=d&&"trace_advanced_yinglilv_b"!=d||f.getCurrentGameMessage().show({type:"normal",closeFun:function(){this.hide()},data:{tplData:{msg:"您的方案已被修改，如果需要根据最新方案进行追号，请点击生成追号计划按钮"}}}),b.getAdvancedRowTable().html(""),b.updateDetail(c.amount),b.updateStatistics()},updateDetail:function(a){var b,c=this,d=c.getTable().find("tr"),e=null,f=c.getRowTableType();"trace_advanced_yingli_a"==f||"trace_advanced_yingli_b"==f||"trace_advanced_yinglilv_a"==f||"trace_advanced_yinglilv_b"==f?c.rebuildYinglilvRows():(b=c.getAdvancedRowTable().attr("data-type"),("trace_advanced_fanbei_a"==b||"trace_advanced_fanbei_b"==b)&&(d=c.getAdvancedTable().find("tr"),d.each(function(){e=$(this),rowMoney=e.find(".trace-row-money"),rowMultiple=Number(e.find(".trace-row-multiple").val()),rowMoney.text(c.formatMoney(rowMultiple*a))}))),d=c.getNormalTable().find("tr"),d.each(function(){e=$(this),rowMoney=e.find(".trace-row-money"),rowMultiple=Number(e.find(".trace-row-multiple").val()),rowMoney.text(c.formatMoney(rowMultiple*a))})},getWinMoney:function(){for(var a=this,b=a.getOrderData().orders,c=0,d=b.length,e=0;d>c;c++)e+=a.getPlayGroupMoneyByGameMethodName(b[c].type)*b[c].moneyUnit;return e},confirmSetting:function(){var a=this;a.setOrderData(f.getCurrentGameOrder().getTotal()),a.buildDetail()},isMoreBounsMethod:function(){for(var a=this,b=a.getOrderData().orders,c=0,d=b.length;d>c;c++)if(type=b[c].type,"undefined"!=typeof f.currentIsMoreBouns.moreBouns[type]&&1==f.currentIsMoreBouns.moreBouns[type])return b[c].typeText;return""},isSameGameMethod:function(){var a=this,b=a.getOrderData().orders,c="",d=-1;for(i=0,len=b.length;len>i;i++){if(""!=c){if(c!=b[i].type)return!1}else c=b[i].type;if(-1!=d){if(d!=b[i].moneyUnit)return!1}else d=b[i].moneyUnit}return!0},getSameGameMethodName:function(){var a=this,b=a.getOrderData().orders;return b.length>0?b[0].type:void 0},getSameGameMoneyUnti:function(){var a=this,b=a.getOrderData().orders;return b.length>0?b[0].moneyUnit:void 0},setOrderData:function(a){this.orderData=a},getOrderData:function(){return null==this.orderData?{count:0,amount:0,orders:[]}:this.orderData},getStartNumberIndexByNumber:function(a){for(var b=f.getCurrentGame().getDynamicConfig().gamenumbers,c=b.length,d=0;c>d;d++)if(b[d].number==a)return d;return-1},getStartNumberByIndex:function(a){var b=f.getCurrentGame().getDynamicConfig().gamenumbers;return b.length>a?b[a]:{}},buildDetail:function(){var a=this,b=a.getTraceType(),c=f.getCurrentGameMessage();return a.setOrderData(f.getCurrentGameOrder().getTotal()),orderAmount=a.getOrderData().amount,"normal"!=b&&0>=orderAmount?void c.show({type:"mustChoose",msg:"请至少选择一注投注号码！",data:{tplData:{msg:"请至少选择一注投注号码！"}}}):($.isFunction(a["trace_"+b])&&a["trace_"+b].call(a),void a.updateStatistics())},trace_normal:function(){{var a,b,c,d=this,e=d.defConfig,g=e.dataRowTemplate,h=[],i=(d.getTraceType(),d.getTimes()),j=d.getMultiple(),k=(f.getCurrentGameOrder().getOrderMaxMultiple().maxnum,0),l=0,m=f.getCurrentGame().getCurrentNumber(),n='<span class="icon-period-current"></span>',o="",p=d.traceStartNumberSelect.getValue();f.getCurrentGame().getDynamicConfig().gamenumbers.length}for(d.setOrderData(f.getCurrentGameOrder().getTotal()),k=d.getOrderData().amount,h.push(e.dataRowHeader),a=d.getStartNumberIndexByNumber(p),l=a,i+=l;i>l;l++)b=d.getStartNumberByIndex(l),o=b.number,o==m&&(o+=n),b.number&&(c={No:l+1,traceNumber:o,issueCode:b.issueCode,multiple:j,money:d.formatMoney(k*j),publishTime:b.time},h.push(d.formatRow(g,c)));d.getRowTable().html(h.join("")),d.getRowTable().attr("data-type","trace_normal")},trace_advanced:function(){var a=this,b=a.getTraceType(),c=a.getAdvancedType(),d=a.getTypeTypeType(),e="trace_"+b+"_"+c+"_"+d,g="",h="",i=a.isMoreBounsMethod();if("fanbei"==c);else if(!a.isSameGameMethod()&&("yingli"==c||"yinglilv"==c)||""!=i)return g="yingli"==c?"盈利金额追号":"yinglilv"==c?"盈利率追号":"盈利追号方式",a.isSameGameMethod()?""!=i&&(h=g+"时，"+i+",为多奖金玩法，不支持盈利金额和盈利率追号"):h=g+"不支持混投<br />请确保您的投注都为同一玩法类型<br />且元角模式一致。",a.getRowTable().html(""),void f.getCurrentGameMessage().show({type:"mustChoose",msg:"",data:{tplData:{msg:h}}});$.isFunction(a[e])&&a[e](),a.getRowTable().attr("data-type",e)},trace_advanced_fanbei_a:function(a){var b,c,d,e=this,g=e.defConfig.dataRowTemplate,h=[],i=e.getTimes(),j=f.getCurrentGameOrder().getOrderMaxMultiple(),k=a||j.maxnum,l=f.getCurrentGame().getGameConfig().getInstance().getTitleByName(j.gameMethod).join("-"),m=Number($("#J-trace-advanced-fanbei-a-jiange").val()),n=e.getMultiple(),o=n,p=Number($("#J-trace-advanced-fanbei-a-multiple").val()),q=0,r=m,s=f.getCurrentGame().getCurrentNumber(),t='<span class="icon-period-current"></span>',u="",v=e.traceStartNumberSelect.getValue(),w=(f.getCurrentGame().getDynamicConfig().gamenumbers.length,""),x="";for(h.push(e.defConfig.dataRowHeader),b=e.getStartNumberIndexByNumber(v),q=b,i+=q,c=e.getStartNumberByIndex(q);i>q;q++){if(0>=r&&(r=m,o*=p),r--,o>k&&(f.getCurrentGameMessage().show({type:"normal",closeText:"确定",closeFun:function(){e.trace_advanced_fanbei_a(k),e.updateStatistics(),this.hide()},data:{tplData:{msg:"翻倍追号中的<b>["+l+"]</b>的倍数超过了最大倍数限制，系统将自动调整为最大可设置倍数"}}}),!a))return;if(o=o>k?k:o,c=e.getStartNumberByIndex(q),!c.number)break;u=c.number,u==s&&(u+=t),d={No:x,traceNumber:u,issueCode:c.issueCode,multiple:o,money:e.formatMoney(orderAmount*o),publishTime:c.time},w=u.substr(0,8),h.push(e.formatRow(g,d))}e.getRowTable().html(h.join(""))},trace_advanced_fanbei_b:function(){var a,b,c,d=this,e=d.defConfig.dataRowTemplate,g=[],h=d.getTimes(),i=f.getCurrentGameOrder().getOrderMaxMultiple().maxnum,j=(Number($("#J-trace-advanced-fanbei-a-jiange").val()),d.getMultiple(),1),k=(Number($("#J-trace-advanced-fanbei-a-multiple").val()),0),l=Number($("#J-trace-advanced-fanbei-b-num").val()),m=Number($("#J-trace-advance-multiple").val()),n=Number($("#J-trace-advanced-fanbei-b-multiple").val()),o=f.getCurrentGame().getCurrentNumber(),p='<span class="icon-period-current"></span>',q="",r=d.traceStartNumberSelect.getValue(),s=(f.getCurrentGame().getDynamicConfig().gamenumbers.length,""),t="";for(g.push(d.defConfig.dataRowHeader),a=d.getStartNumberIndexByNumber(r),k=a,h+=k,b=d.getStartNumberByIndex(k);h>k&&(j=l+a>k?m>i?i:m:n>i?i:n,b=d.getStartNumberByIndex(k),b.number);k++)q=b.number,q==o&&(q+=p),c={No:t,traceNumber:q,issueCode:b.issueCode,multiple:j,money:d.formatMoney(orderAmount*j),publishTime:b.time},s=q.substr(0,8),g.push(d.formatRow(e,c));d.getRowTable().html(g.join(""))},trace_advanced_yingli_a:function(a){var b,c,d,e=this,g=e.defConfig.dataRowTemplate,h=[],i=e.getTimes(),j=f.getCurrentGameOrder().getOrderMaxMultiple(),k=a||j.maxnum,l=f.getCurrentGame().getGameConfig().getInstance().getTitleByName(j.gameMethod).join("-"),m=e.getMultiple(),n=0,o=(e.getSameGameMethodName(),Number($("#J-trace-advanced-yingli-a-money").val())),p=e.getSameGameMoneyUnti(),q=e.getWinMoney(),m=1,g=e.defConfig.dataRowYingliTemplate,r=e.getOrderData().orders,s=0,t=0,u=0,v=0,w=f.getCurrentGame().getCurrentNumber(),x='<span class="icon-period-current"></span>',y="",z=e.traceStartNumberSelect.getValue(),A=(f.getCurrentGame().getDynamicConfig().gamenumbers.length,""),B="";for(h.push(e.defConfig.dataRowYingliHeader),b=e.getStartNumberIndexByNumber(z),n=b,i+=n,c=e.getStartNumberByIndex(n);i>n;n++){if(s=0,u=0,m=1,$.each(r,function(){var a=this,b=a.num,c=a.onePrice,d=a.multiple,e=b*d*c*p,f=q*d;u+=f,s+=e}),m=e.getMultipleByMoney(q,o,s,t),0>m)return f.getCurrentGameMessage().show({type:"normal",closeText:"确定",closeFun:function(){this.hide()},data:{tplData:{msg:"您设置的盈利金额追号参数过高，无法达到您预期的目标值，请您重新修改参数设置。"}}}),void e.getRowTable().html("");if(m>k){if(f.getCurrentGameMessage().show({type:"normal",closeText:"确定",closeFun:function(){e.trace_advanced_yingli_a(k),e.updateStatistics(),this.hide()},data:{tplData:{msg:"盈利金额追号中的<b>["+l+"]</b>的倍数超过了最大倍数限制，系统将自动调整为最大可设置倍数"}}}),m=a,!a)return;m=a}if(s*=m,t+=s,u=q*m-t,v=u/t,o>u)break;if(c=e.getStartNumberByIndex(n),!c.number)break;y=c.number,y==w&&(y+=x),d={No:B,traceNumber:y,issueCode:c.issueCode,multiple:m,money:e.formatMoney(s),userGroupMoney:e.formatMoney(q*m),winTotalAmout:e.formatMoney(u),yinglilv:Number(100*v).toFixed(2)},A=y.substr(0,8),h.push(e.formatRow(g,d))}e.getRowTable().html(h.join(""))},trace_advanced_yingli_b:function(a){var b,c,d,e=this,g=e.defConfig.dataRowTemplate,h=[],i=e.getTimes(),j=f.getCurrentGameOrder().getOrderMaxMultiple(),k=a||j.maxnum,l=f.getCurrentGame().getGameConfig().getInstance().getTitleByName(j.gameMethod).join("-"),m=e.getMultiple(),n=0,o=(e.getSameGameMethodName(),Number($("#J-trace-advanced-yingli-b-num").val())),p=Number($("#J-trace-advanced-yingli-b-money1").val()),q=Number($("#J-trace-advanced-yingli-b-money2").val()),r=e.getSameGameMoneyUnti(),s=e.getWinMoney(),m=1,g=e.defConfig.dataRowYingliTemplate,t=e.getOrderData().orders,u=0,v=0,w=0,x=0,y=f.getCurrentGame().getCurrentNumber(),z='<span class="icon-period-current"></span>',A="",B=e.traceStartNumberSelect.getValue(),C=(f.getCurrentGame().getDynamicConfig().gamenumbers.length,""),D="";for(h.push(e.defConfig.dataRowYingliHeader),b=e.getStartNumberIndexByNumber(B),n=b,i+=n,c=e.getStartNumberByIndex(n);i>n;n++){if(n+1>o+b&&(p=q),u=0,w=0,m=1,$.each(t,function(){var a=this,b=a.num,c=a.onePrice,d=a.multiple,e=b*d*c*r,f=s*d;w+=f,u+=e}),m=e.getMultipleByMoney(s,p,u,v),0>m)return f.getCurrentGameMessage().show({type:"normal",closeText:"确定",closeFun:function(){this.hide()},data:{tplData:{msg:"您设置的盈利金额追号参数过高，无法达到您预期的目标值，请您重新修改参数设置。"}}}),void e.getRowTable().html("");if(m>k){if(f.getCurrentGameMessage().show({type:"normal",closeText:"确定",closeFun:function(){e.trace_advanced_yingli_b(k),e.updateStatistics(),this.hide()},data:{tplData:{msg:"盈利金额追号中的<b>["+l+"]</b>的倍数超过了最大倍数限制，系统将自动调整为最大可设置倍数"}}}),m=a,!a)return;m=a}if(u*=m,v+=u,w=s*m-v,x=w/v,c=e.getStartNumberByIndex(n),!c.number)break;A=c.number,A==y&&(A+=z),d={No:D,traceNumber:A,issueCode:c.issueCode,multiple:m,money:e.formatMoney(u),userGroupMoney:e.formatMoney(s*m),winTotalAmout:e.formatMoney(w),yinglilv:Number(100*x).toFixed(2)},C=A.substr(0,8),h.push(e.formatRow(g,d))}e.getRowTable().html(h.join(""))},trace_advanced_yinglilv_a:function(a){var b,c,d,e=this,g=e.defConfig.dataRowTemplate,h=[],i=e.getTimes(),j=f.getCurrentGameOrder().getOrderMaxMultiple(),k=a||j.maxnum,l=f.getCurrentGame().getGameConfig().getInstance().getTitleByName(j.gameMethod).join("-"),m=e.getMultiple(),n=0,o=(e.getSameGameMethodName(),Number($("#J-trace-advanced-yinglilv-a").val())/100),p=e.getSameGameMoneyUnti(),q=e.getWinMoney(),m=1,g=e.defConfig.dataRowYingliTemplate,r=e.getOrderData().orders,s=0,t=0,u=0,v=f.getCurrentGame().getCurrentNumber(),w='<span class="icon-period-current"></span>',x="",y=e.traceStartNumberSelect.getValue(),z=(f.getCurrentGame().getDynamicConfig().gamenumbers.length,""),A="";for(h.push(e.defConfig.dataRowYingliHeader),b=e.getStartNumberIndexByNumber(y),n=b,i+=n,c=e.getStartNumberByIndex(n);i>n;n++){if(s=0,u=0,m=1,$.each(r,function(){var a=this,b=a.num,c=a.onePrice,d=a.multiple,e=b*d*c*p,f=q*d;u+=f,s+=e}),m=e.getMultipleByYinglilv(o,q,s,t),0>m)return f.getCurrentGameMessage().show({type:"normal",closeText:"确定",closeFun:function(){this.hide()},data:{tplData:{msg:"您设置的盈利率追号参数过高，无法达到您预期的目标值，请您重新修改参数设置。"}}}),void e.getRowTable().html("");if(m>k){if(f.getCurrentGameMessage().show({type:"normal",closeText:"确定",closeFun:function(){e.trace_advanced_yinglilv_a(k),e.updateStatistics(),this.hide()},data:{tplData:{msg:"盈利率追号中的<b>["+l+"]</b>的倍数超过了最大倍数限制，系统将自动调整为最大可设置倍数"}}}),m=a,!a)return;m=a}if(s*=m,t+=s,u=q*m-t,Number(u/t)<o)break;if(c=e.getStartNumberByIndex(n),!c.number)break;x=c.number,x==v&&(x+=w),d={No:A,traceNumber:x,issueCode:c.issueCode,multiple:m,money:e.formatMoney(s),userGroupMoney:e.formatMoney(q*m),winTotalAmout:e.formatMoney(u),yinglilv:Number(u/t*100).toFixed(2)},h.push(e.formatRow(g,d))}z=x.substr(0,8),e.getRowTable().html(h.join(""))},trace_advanced_yinglilv_b:function(a){var b,c,d,e=this,g=e.defConfig.dataRowTemplate,h=[],i=e.getTimes(),j=f.getCurrentGameOrder().getOrderMaxMultiple(),k=a||j.maxnum,l=f.getCurrentGame().getGameConfig().getInstance().getTitleByName(j.gameMethod).join("-"),m=e.getMultiple(),n=0,o=(e.getSameGameMethodName(),Number($("#J-trace-advanced-yinglilv-b-num").val())),p=Number($("#J-trace-advanced-yingli-b-yinglilv1").val())/100,q=Number($("#J-trace-advanced-yingli-b-yinglilv2").val())/100,r=0,s=e.getSameGameMoneyUnti(),t=e.getWinMoney(),m=1,g=e.defConfig.dataRowYingliTemplate,u=e.getOrderData().orders,v=0,w=0,x=0,y=f.getCurrentGame().getCurrentNumber(),z='<span class="icon-period-current"></span>',A="",B=e.traceStartNumberSelect.getValue(),C=(f.getCurrentGame().getDynamicConfig().gamenumbers.length,""),D="";for(h.push(e.defConfig.dataRowYingliHeader),b=e.getStartNumberIndexByNumber(B),n=b,i+=n,c=e.getStartNumberByIndex(n);i>n;n++){if(v=0,x=0,m=1,$.each(u,function(){var a=this,b=a.num,c=a.onePrice,d=a.multiple,e=b*d*c*s,f=b*t*d;x+=f,v+=e}),r=o+b>n?p:q,m=e.getMultipleByYinglilv(r,t,v,w),0>m)return f.getCurrentGameMessage().show({type:"normal",closeText:"确定",closeFun:function(){this.hide()},data:{tplData:{msg:"您设置的盈利率追号参数过高，无法达到您预期的目标值，请您重新修改参数设置。"}}}),void e.getRowTable().html("");if(m>k){if(f.getCurrentGameMessage().show({type:"normal",closeText:"确定",closeFun:function(){e.trace_advanced_yinglilv_a(k),e.updateStatistics(),this.hide()},data:{tplData:{msg:"盈利率追号中的<b>["+l+"]</b>的倍数超过了最大倍数限制，系统将自动调整为最大可设置倍数"}}}),m=a,!a)return;m=a}if(v*=m,w+=v,x=t*m-w,c=e.getStartNumberByIndex(n),!c.number)break;A=c.number,A==y&&(A+=z),d={No:D,traceNumber:A,issueCode:c.issueCode,multiple:m,money:e.formatMoney(v),userGroupMoney:e.formatMoney(t*m),winTotalAmout:e.formatMoney(x),yinglilv:Number(x/w*100).toFixed(2)},C=A.substr(0,8),h.push(e.formatRow(g,d))}e.getRowTable().html(h.join(""))},getMultipleByYinglilv:function(a,b,c,d){for(var e=1,f=1e5;f>e;e++)if((b*e-c*e-d)/(c*e+d)>=a)return e;return-1},getMultipleByMoney:function(a,b,c,d){for(var e=1,f=1e5;f>e;e++)if(a*e-d-c*e>b)return e;return-1},getPlayGroupMoneyByGameMethodName:function(a){var b=f.getCurrentGame().getDynamicConfig().gamelimit[a].usergroupmoney,c=f.getCurrentGame().getCurrentGameMethod().getGameMethodName(),d=f.getCurrentGame().getGameConfig().getInstance().getBetAwardUrl()+"?type="+c+"&extent=currentFre&line=5&lenth=30";return b&&Number(b)>0?b:f.cacheData.gameBonus[d]&&f.cacheData.gameBonus[d]>0?Number(f.cacheData.gameBonus[d]):void alert(f.getCurrentGame().getGameConfig().getInstance().getTitleByName(a)+"玩法类型奖金组读取失败，请刷新页面重试！")},formatRow:function(a,b){var c,d,e=b;for(c in e)e.hasOwnProperty(c)&&(d=RegExp("<#="+c+"#>","g"),a=a.replace(d,e[c]));return a},formatMoney:function(a){var a=Number(a),b=/(-?\d+)(\d{3})/;for(a=Number.prototype.toFixed?a.toFixed(2):Math.round(100*a)/100,a=""+a;b.test(a);)a=a.replace(b,"$1,$2");return a},getAdvancedTable:function(){var a=this;return a._advancedTable||(a._advancedTable=$("#J-trace-table-advanced"))},getAdvancedRowTable:function(){var a=this;return a._advancedTableContainer||(a._advancedTableContainer=$("#J-trace-table-advanced-body"))},getNormalTable:function(){var a=this;return a._table||(a._table=$("#J-trace-table"))},getNormalRowTable:function(){var a=this;return a._tableContainer||(a._tableContainer=$("#J-trace-table-body"))},getTable:function(){var a=this;return a.isAdvanced()?a._advancedTable||(a._advancedTable=$("#J-trace-table-advanced")):a._table||(a._table=$("#J-trace-table"))},getRowTable:function(){var a=this;return a.isAdvanced()?a._advancedTableContainer||(a._advancedTableContainer=$("#J-trace-table-advanced-body")):a._tableContainer||(a._tableContainer=$("#J-trace-table-body"))},setCurrentTraceNumber:function(a){var b=this;b.currentTraceNumber=a},getCurrentTraceNumber:function(){return me.currentTraceNumber},setTraceStartNumber:function(a){var b=this;b.traceStartNumber=a},getTraceStartNumber:function(){return me.traceStartNumber},getMultiple:function(){var a=this;return a.isAdvanced()?a.getAdvancedMultiple():a.getNormalMultiple()},getNormalMultiple:function(){return Number(this.normalSelectMultiple.getValue())},getAdvancedMultiple:function(){return Number($("#J-trace-advance-multiple").val())},setIsWinStop:function(a){this.isWinStop=!!a},getTimes:function(){var a=this;return a.isAdvanced()?a.getAdvancedTimes():Number($("#J-trace-normal-times").val())},getAdvancedTimes:function(){return Number($("#J-trace-advanced-times").val())},isAdvanced:function(){var a=this;return"advanced"==a.traceType},setTraceType:function(a){var b=this;a!=b.traceType&&(a=a?a:"normal",b.traceType=a)},getTraceType:function(){return this.traceType},getRowTableType:function(){var a=this;return a.getRowTable().attr("data-type")},emptyRowTable:function(){var a=this;$("#J-trace-table-body").html(""),$("#J-trace-table-advanced-body").html(""),a.updateStatistics()},show:function(){var a=this;f.getCurrentGameOrder().editMultiples(1),a.setOrderData(f.getCurrentGameOrder().getTotal()),f.getCurrentGameStatistics().getMultipleDom().hide(),f.getCurrentGameStatistics().getMultipleTextDom().show(),a.panel.show(),a.isOpenPanel=!0,a.buildDetail()},hide:function(){var a=this;f.getCurrentGameOrder().restoreMultiples(),f.getCurrentGameStatistics().getMultipleDom().show(),f.getCurrentGameStatistics().getMultipleTextDom().hide(),a.panel.hide(),a.isOpenPanel=!1,a.reSetTab(),a.emptyRowTable(),$("#J-trace-switch").get(0).checked=!1,$("#J-trace-iswinstop-panel").hide(),$("#J-trace-iswintimesstop-panel").show(),$("#J-trace-iswintimesstop").get(0).checked=!1},reSetTab:function(){var a=this,b=a.TraceTab,c=a.TraceAdvancedTab;b.triggers.removeClass(b.defConfig.currClass),b.triggers.eq(0).addClass(b.defConfig.currClass),b.panels.removeClass(b.defConfig.currPanelClass),b.panels.eq(0).addClass(b.defConfig.currPanelClass),b.index=0,c.triggers.removeClass(c.defConfig.currClass),c.triggers.eq(0).addClass(c.defConfig.currClass),c.panels.removeClass(c.defConfig.currPanelClass),c.panels.eq(0).addClass(c.defConfig.currPanelClass),c.index=0,$("#J-trace-normal-times").val(10),$("#J-function-select-tab .function-select-title li").removeClass("current").eq(1).addClass("current"),a.normalSelectMultiple.setValue(1),$("#J-trace-advanced-times").val(10),$("#J-trace-advance-multiple").val(1),$("#J-trace-advanced-fanbei-a-jiange").val(2),$("#J-trace-advanced-fanbei-a-multiple").val(2),$("#J-trace-advanced-fanbei-b-num").val(5),$("#J-trace-advanced-fanbei-b-multiple").val(3),$("#J-trace-advanced-yingli-a-money").val(100),$("#J-trace-advanced-yingli-b-num").val(2),$("#J-trace-advanced-yingli-b-money1").val(100),$("#J-trace-advanced-yingli-b-money2").val(50),$("#J-trace-advanced-yinglilv-a").val(10),$("#J-trace-advanced-yinglilv-b-num").val(5),$("#J-trace-advanced-yingli-b-yinglilv1").val(30),$("#J-trace-advanced-yingli-b-yinglilv2").val(10),a.setTraceType("normal"),a.advancedType=a.defConfig.advancedTypeHas[0],a.typeTypeType="a",$("#J-trace-advanced-type-panel").find('input[type="radio"]').each(function(a){if((a+1)%2!=0){var b,c=$(this),d=c.parent(),e=d.parent().children();this.checked=!0,e.each(function(a){b=e.get(a),d.get(0)!=b?$(b).find('input[type="text"]').attr("disabled","disabled"):$(b).find('input[type="text"]').attr("disabled",!1)})}})}},k=a.Class(j,c);k.defConfig=e,k.getInstance=function(a){return d||(d=new k(a))},a[b]=k}(phoenix,"GameTrace",phoenix.Event),function(a,b,c,d){var e,f={URL:"",handlingChargeURL:""},g=a.Games,h={init:function(){{var a=this;a.defConfig}a.postLock=null,g.setCurrentGameSubmit(a),a.addEvent("afterSubmit",function(){a.cancelPostLock()})},formatMoney:function(a){var a=Number(a),b=/(-?\d+)(\d{3})/;for(a=Number.prototype.toFixed?a.toFixed(2):Math.round(100*a)/100,a=""+a;b.test(a);)a=a.replace(b,"$1,$2");return a},getSubmitData:function(){var a={},b=g.getCurrentGameOrder().orderData,c=0,d=b.length,e=g.getCurrentGameTrace().getResultData(),f=0,h=e.traceData.length;for(a.gameType=g.getCurrentGame().getGameConfig().getInstance().defConfig.gameType,a.isTrace=e.traceData.length>0?1:0,a.traceWinStop=g.getCurrentGameTrace().getIsWinStop(),a.traceStopValue=g.getCurrentGameTrace().getTraceWinStopValue(),a.balls=[],a.ordersNumber="";d>c;c++)a.balls.push({id:b[c].id,ball:b[c].postParameter,type:b[c].type,moneyunit:b[c].moneyUnit,multiple:b[c].multiple,num:b[c].num});if(a.orders=[],a.isTrace<1)a.orders.push({number:g.getCurrentGame().getCurrentNumber(),issueCode:g.getCurrentGame().getCurrentIssueCode(),multiple:1}),a.amount=g.getCurrentGameStatistics().formatMoney(g.getCurrentGameOrder().getTotal().amount),a.ordersNumber="第 "+g.getCurrentGame().getCurrentNumber()+" 期",a.onlyAmount="";
else{for(;h>f;f++)a.orders.push({number:e.traceData[f].traceNumber,issueCode:Number(e.traceData[f].issueCode),multiple:e.traceData[f].multiple});a.ordersNumber="第 "+a.orders[0].number+"  至  "+a.orders[h-1].number+"   共  <strong class='color-red'>"+h+"</strong></span>  期",a.amount=g.getCurrentGameStatistics().formatMoney(e.amount,2),a.onlyAmount=e.orderData.amount}return a},doPostLock:function(){var a=this;a.postLock=!0},cancelPostLock:function(){var a=this;a.postLock=null},clearData:function(){var a=g.getCurrentGameOrder();a.reSet(),a.cancelSelectOrder(),g.getCurrentGame().getCurrentGameMethod().reSet()},afterSubmitSuccess:function(){var a="",b="",c=this;try{$.ajax({dataType:"json",cache:!1,url:g.getCurrentGame().getGameConfig().getInstance().getUserOrdersUrl(),cache:!1,success:function(b){$.isEmptyObject(b)||($("#program-user-orders > tbody").html(""),$.each(b,function(d){a+='<tr><td><a target="_black" href="/gameUserCenter/queryOrderDetail?orderId='+b[d].orderId+'"> '+b[d].webIssueCode+"</a></td>",a+="<td><span class='price'><dfn>&yen;</dfn>"+c.formatMoney(b[d].totamount/1e4)+"</span></td>",a+=2==Number(b[d].status)?"<td >中<span class='price color-red'><dfn>&yen;</dfn>"+c.formatMoney(b[d].totwin/1e4)+"</td></span></tr>":"<td >"+b[d].statusName+"</td></tr>"}),$("#program-user-orders > tbody").append(a))}}),$.ajax({dataType:"json",cache:!1,url:g.getCurrentGame().getGameConfig().getInstance().getUserPlansUrl(),cache:!1,success:function(a){$.isEmptyObject(a)||($("#program-user-plans > tbody").html(""),$.each(a,function(d){switch(b+='<tr><td><a target="_black" href="/gameUserCenter/queryPlanDetail?planid='+a[d].planid+'"> '+a[d].startWebIssueCode+"</a></td>",b+="<td>"+Number(a[d].finishIssue)+"/"+Number(a[d].totalIssue)+"</td>",b+="<td><span class='price'><dfn>&yen;</dfn>"+c.formatMoney(a[d].totamount/1e4)+" </span></td>",a[d].status){case 0:b+="<td >未开始</td></tr>";break;case 1:b+="<td >进行中</td></tr>";break;case 2:b+="<td >已结束</td></tr>";break;case 3:b+="<td >已终止</td></tr>";break;case 4:b+="<td >暂停</td></tr>";break;default:b+="<td ></td></tr>"}}),$("#program-user-plans > tbody").append(b))}})}catch(d){alert("网络异常，读取信息失败")}},balanceInquiry:function(a){$.ajax({dataType:"json",cache:!1,url:g.getCurrentGame().getGameConfig().getInstance().getUserBalUrl(),data:"",success:function(b){var c=""==b?0:b,d=phoenix.util.formatMoney(c/1e4);$("#"+a).html(d)}})},submitData:function(){var a=this,b=a.getSubmitData(),c=g.getCurrentGameMessage();if(b.balls.length<=0)return c.show({type:"mustChoose",msg:"请至少选择一注投注号码！",data:{tplData:{msg:"请至少选择一注投注号码！"}}}),void a.cancelPostLock();var e=!0;c.show({type:"checkLotters",msg:"请核对您的投注信息！",confirmIsShow:!0,confirmFun:function(){a.postLock||(a.doPostLock(),a.fireEvent("beforeSubmit"),b.ordersNumber=d,b.onlyAmount=d,b.amount=phoenix.util.formatFloat(b.amount),$.ajax({url:g.getCurrentGame().getGameConfig().getInstance().submitUrl(),data:JSON.stringify(g.getCurrentGame().editSubmitData(b)),dataType:"json",method:"POST",cache:!1,contentType:"application/json; charset=utf-8",beforeSend:function(){return e?($(".confirm").html("提交中..."),$(".cancel").css("display","none").attr("disabled","true"),e=!1,void 0):!1},success:function(d){if(1==Number(d.isSuccess)){var e=Number(b.isTrace)>0?1:0;e>0?(d.data.tplData.url="/gameUserCenter/queryPlans?time=7",d.data.tplData.gameType="追号记录"):(d.data.tplData.url="/gameUserCenter/queryOrdersEnter?time=7",d.data.tplData.gameType="投注记录"),c.show(d),a.clearData(),a.balanceInquiry("spanBall"),a.afterSubmitSuccess(),setTimeout(function(){g.getCurrentGameTrace().hide(),$("html,body").animate({scrollTop:$("#J-top-game-menu").offset().top},1e3)},1500)}else c.show(d)},complete:function(){a.fireEvent("afterSubmit"),e=!0,$(".cancel").css("display","display").removeAttr("disabled")},error:function(a){c.show("404"==a.status||"0"==a.status||"401"==a.status?{mask:!0,title:"温馨提示",content:"<div class='pop-title'><i class='ico-error'></i><h4 class='pop-text'>登录超时 请重新登入！</h4></div>",cancelIsShow:!0,cancelFun:function(){window.location.reload()}}:{mask:!0,title:"温馨提示",content:"<div class='pop-title'><i class='ico-error'></i><h4 class='pop-text'>方案提交失败,<br />请检查网络并重新提交！</h4></div>",cancelIsShow:!0,cancelFun:function(){c.hide()}})}}))},cancelIsShow:!0,cancelFun:function(){a.cancelPostLock(),this.hide()},normalCloseFun:function(){a.cancelPostLock()},callback:function(){var a=Number(g.getCurrentGame().getGameConfig().getInstance().defConfig.backOutStartFee)/1e4,d=Number(g.getCurrentGame().getGameConfig().getInstance().defConfig.backOutRadio)/1e4,e=g.getCurrentGameStatistics().ToForamtmoney(b.amount);e>a&&($("#showLotteryChareg").show(),c.getContentDom().find(".handlingCharge").html(g.getCurrentGameStatistics().formatMoney(e*d,3)))},data:{tplData:{lotteryDate:b.ordersNumber,lotteryName:g.getCurrentGame().getGameConfig().getInstance().getGameTypeCn(),lotteryInfo:function(){for(var a="",c=b.balls,d=0;d<c.length;d++){var e=c[d];a+='<div style="line-height:25px;">'+g.getCurrentGame().getGameConfig().getInstance().getTitleByName(e.type).join("")+" "+e.ball+"</div>"}return a},lotteryamount:b.amount,lotteryAcc:g.getCurrentGame().getDynamicConfig().username,lotteryOnlyAmount:b.onlyAmount,lotteryTraceInfo:function(){var a="";return b.isTrace>0&&(a=b.orders),a}}}})}},i=a.Class(h,c);i.defConfig=f,i.getInstance=function(a){return e||(e=new i(a))},a[b]=i}(phoenix,"GameSubmit",phoenix.Event);
!function(a,b,c,d){var e,f={mainPanel:"#J-balls-statistics-panel",multipleLimitDom:"#J-balls-statistics-multipleLimit",lotteryNumDom:"#J-balls-statistics-lotteryNum",multipleDom:"#J-balls-statistics-multiple",amountDom:"#J-balls-statistics-amount",moneyUnitDom:"#J-balls-statistics-moneyUnit",moneyUnit:1,moneyUnitData:{.1:"角",1:"元"},onePrice:2,multiple:1,multipleLimit:88},g=a.Games,h={init:function(b){var c=this;g.setCurrentGameStatistics(c),c.panel=$(b.mainPanel),c.moneyUnit=b.moneyUnit,c.onePrice=b.onePrice,c.multiple=b.multiple,c.multipleLimit=b.multipleLimit,c.setMultipleLimit(b.multipleLimit),c.gameMethodName="",c.lotteryData=[],c.multipleDom=new phoenix.Select({realDom:b.multipleDom,isInput:!0,expands:{inputEvent:function(){var a=this;a.getInput().keyup(function(){var b=this.value,c=g.getCurrentGameStatistics().getMoneyUnitDom().getValue(),d=g.getCurrentGameStatistics().getMultipleLimit();this.value=this.value.replace(/[^\d]/g,""),b=Number(this.value),this.value=1>b?1:1==Number(c)?b>d?d:b:b>10*d?10*d:b,a.setValue(this.value)})}}}),c.multipleDom.setValue(c.multiple),c.multipleDom.addEvent("change",function(a,b){var d=Number(b),e=g.getCurrentGameStatistics().getMoneyUnitDom().getValue(),f=g.getCurrentGameStatistics().getMultipleLimit();1==Number(e)?d>f&&(d=f,this.setValue(d)):d>10*f&&(d=10*f,this.setValue(d)),c.setMultiple(d),c.updateData({lotterys:g.getCurrentGame().getCurrentGameMethod().getLottery(),original:g.getCurrentGame().getCurrentGameMethod().getOriginal()},g.getCurrentGame().getCurrentGameMethod().getGameMethodName())}),c.moneyUnitDom=new a.Select({realDom:b.moneyUnitDom}),c.moneyUnitDom.setValue(c.moneyUnit),c.moneyUnitDom.addEvent("change",function(a,b){var d=g.getCurrentGame().getDynamicConfig().gamelimit[c.gameMethodName].maxmultiple,e=Number(b);c.setMoneyUnit(Number(b)),c.updateData({lotterys:g.getCurrentGame().getCurrentGameMethod().getLottery(),original:g.getCurrentGame().getCurrentGameMethod().getOriginal()},g.getCurrentGame().getCurrentGameMethod().getGameMethodName()),1==e?c.setMultipleLimit(d):c.setMultipleLimit(d,"jms"),c.multipleDom.setValue(1)}),c.updateData({lotterys:[],original:[]})},getMultipleDom:function(){return this.multipleDom},getMultipleTextDom:function(){return $("#J-balls-statistics-multiple-text")},setMultipleLimit:function(a,b){var c=this,e="无限制";a=Number(a),isNaN(a)&&(a=b==d?99999:999999),this.multipleLimit=a,0>a?(this.multipleLimit=b==d?99999:999999,e="无限制"):"jms"==b?999999>a&&(e=""+10*a+" 倍"):99999>a&&(e=""+a+" 倍"),c.getMultipleLimitDom().html(e)},getMultipleLimit:function(){return this.multipleLimit},getMoneyUnitText:function(a){return this.defConfig.moneyUnitData[""+a]},updateData:function(a,b){var c=this,e=(c.defConfig,a.lotterys==d?0:a.lotterys.length),f=c.onePrice,g=c.multiple,h=c.moneyUnit;c.setLotteryData(a),c.setGameMethodName(b),c.setLotteryNumDom(e),c.setAmountDom(c.formatMoney(e*h*g*f))},getResultData:function(){var a=this,b=a.getLotteryData();return b.lotterys.length<1?{}:{type:a.getGameMethodName(),original:b.original,lotterys:b.lotterys,moneyUnit:a.moneyUnit,num:b.lotterys.length,multiple:a.multiple,onePrice:a.onePrice,amount:a.formatMoney(b.lotterys.length*a.moneyUnit*a.multiple*a.onePrice),amountText:a.formatMoney(b.lotterys.length*a.moneyUnit*a.multiple*a.onePrice)}},setGameMethodName:function(a){this.gameMethodName=a},getGameMethodName:function(){return this.gameMethodName},setMoneyUnit:function(a){var b=this;b.moneyUnit=a},getMoneyUnit:function(){return this.moneyUnit},getLotteryData:function(){return this.lotteryData},setLotteryData:function(a){var b=this;b.lotteryData=a},formatMoney:function(a){var a=Number(a),b=/(-?\d+)(\d{3})/;for(a=Number.prototype.toFixed?a.toFixed(2):Math.round(100*a)/100,a=""+a;b.test(a);)a=a.replace(b,"$1,$2");return a},ToForamtmoney:function(a){return parseFloat(a.replace(/[^\d\.-]/g,""))},getMultipleLimitDom:function(){var a=this,b=a.defConfig;return a.multipleLimitDom||(a.multipleLimitDom=$(b.multipleLimitDom))},getLotteryNumDom:function(){var a=this,b=a.defConfig;return a.lotteryNumDom||(a.lotteryNumDom=$(b.lotteryNumDom))},setLotteryNumDom:function(a){var b=this;b.getLotteryNumDom().html(a)},getMultipleDom:function(){return this.multipleDom},getMultip:function(){var a=this;return a.multiple},setMultipleDom:function(a){var b=this;b.getMultipleDom().setValue(a)},setMultiple:function(a){this.multiple=a},getMoneyUnitDom:function(){return this.moneyUnitDom},setMoneyUnitDom:function(a){var b=this;b.getMoneyUnitDom().setValue(a)},hidesetMoneyUnitDom:function(){this.moneyUnitDom.hide()},getOnePrice:function(){var a=this;return a.onePrice},getAmountDom:function(){var a=this,b=a.defConfig;return a.amountDom||(a.amountDom=$(b.amountDom))},setAmountDom:function(a){var b=this;b.getAmountDom().html(a)},reSet:function(){{var a=this;a.defConfig}a.fireEvent("afterStatisReset")}},i=a.Class(h,c);i.defConfig=f,i.getInstance=function(a){return e||(e=new i(a))},a[b]=i}(phoenix,"GameStatistics",phoenix.Event);
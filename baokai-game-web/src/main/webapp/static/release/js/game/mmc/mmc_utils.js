!function(a){function b(b,c){this.opts=a.extend({ballsize:5,initball:"0,0,0,0,0",loop:5,timeout:5e3,delay:150,offset:[80,110],handbar:".handle_hand",lamp:".lamp",debugs:!0},c),this.slides=[],this.size=this.opts.ballsize,this.$t=a(b),this.balls=[],this.callback=function(){"sss"},this.errors={invalidBallFormat:"彩球数据格式错误"},this.debugs=this.opts.debugs,this.init()}b.prototype={init:function(){var b=this,c=b.opts;b.checkballs(c.initball)!=b.size&&alert(b.errors.invalidBallFormat),b.$handles=a(c.handbar).children(),b.createdom(),b.preloadLightImg()},checkballs:function(a){var b=this,c=0;if(a&&"string"==typeof a&&(a=a.split(",")),a&&"[object Array]"===Object.prototype.toString.call(a)&&a.length==b.size){b.balls=a;for(var d=0;d<a.length;d++){var e=Number(a[d]);if(0>e||e>9)break;c++}}return c},createdom:function(){for(var b=this,c=b.opts,d=b.balls,e=0;e<b.size;e++){var f="position:absolute;top:0;left:"+e*b.opts.offset[0]+"px;float:none;";f+="height:"+10*c.offset[1]*(c.loop+3)+"px",b.slides.push(a("<div>",{"class":"flipball flipball_"+(e+1),style:f,text:d[e]}).appendTo(b.$t))}},preloadLightImg:function(){var b=this,c=a("img",this.opts.lamp),d=c.data("imgholder");a("<img/>").load(function(){b.$lampimg=c,b.originsrc=c.attr("src"),b.lampsrc=d}).attr("src",d)},marquee:function(a){this.lampsrc&&this.$lampimg.length&&("on"==a?this.$lampimg.attr("src",this.lampsrc):"off"==a&&this.$lampimg.attr("src",this.originsrc))},drawbar:function(b){this.$handles.eq(0).animate({opacity:"hide"},300,function(){a(this).animate({opacity:"show"},300,function(){b&&b()})})},play:function(){this.marquee("on"),this.drawbar()},stop:function(){this.marquee("off")},flip:function(b,c,d){var e=this,f=e.opts,b=b||e.balls,d=d||e.callback;return e.checkballs(b)!=e.size?alert(e.errors.invalidBallFormat):(e.$t.hasClass(".hasball")||e.$t.addClass("hasball"),b=e.balls,e.callback=d,void(c===!1||"undefined"===c?(e.stop(),a.each(e.slides,function(a,c){var d=Number(b[a]);c.stop().css("marginTop",-(10+d)*f.offset[1])}),e.doCallback(e.callback)):(e.play(),a.each(e.slides,function(c,d){var g=Number(b[c]),h=f.timeout+f.delay*c,i=(10*f.loop+g)*f.offset[1];d.stop().animate({marginTop:"+="+.6*f.offset[1]}).stop().animate({marginTop:-i},h,function(){a(this).css("marginTop",-(10+g)*f.offset[1]),c==e.size-1&&(e.stop(),e.doCallback(e.callback))})}))))},quickflip:function(b){var c=this,d=c.opts,e=e||c.balls,f=f||c.callback;return c.callback=null,c.checkballs(e)!=c.size?alert(c.errors.invalidBallFormat):void a.each(c.slides,function(a,g){var h=Number(e[a]);g.stop().css({marginTop:-(10+h)*d.offset[1]}).animate({marginTop:-(10+h+10)*d.offset[1]},1e3,function(){a==c.size-1&&(c.doCallback(f),b&&b())})})},doCallback:function(a){a&&"[object Function]"===Object.prototype.toString.call(a)&&a()},debug:function(){this.debugs&&window.console&&console.log&&console.log("[flipball] "+Array.prototype.join.call(arguments," "))}},a.fn.flipball=function(c){var d;return this.each(function(){d=a.data(this,"flipball"),d||(d=a.data(this,"flipball",new b(this,c)))}),d}}(jQuery),function(a){function b(b,c){var d=a(b).data();for(p in d)if(d.hasOwnProperty(p)&&/^counter[A-Z]+/.test(p)){var e=d[p],f=p.match(/^counter(.*)/)[1].replace(/^[A-Z]/,this.lowerCase);d[f]=e}this.opts=a.extend({max:10,min:1,step:1,init:1,debugs:!0},d,c),this.slides=[],this.$t=a(b),this.eventSave=function(){},this.beforeSetValue=function(){},this.debugs=this.opts.debugs,this.init()}b.prototype={init:function(){var a=this;return a.$ctrl=a.$t.find("[data-counter-action]"),a.$input=a.$t.find("input.J_counter"),a.$input.length?(a.setMaxValue(a.opts.max),a.setMinValue(a.opts.min),a.checkCtrl(),a.bindEvent(),void a.setValue(a.opts.init)):a.debug("No input element!")},lowerCase:function(a){return(a||"").toLowerCase()},setBindEvent:function(a){var b=this;b.eventSave=a},setBeforeSetValue:function(a){var b=this;b.beforeSetValue=a},setMinValue:function(a){this.minValue=a},getMinValue:function(){return this.minValue},setMaxValue:function(a){this.maxValue=a},getMaxValue:function(){return this.maxValue},setValue:function(a){var b=this,c=b.$input,d={val:b.checkCtrl(a)};b.beforeSetValue(d),c.val(d.val),b.eventSave(d.val)},getValue:function(){return this.$input.val()},setMaxBtnStatus:function(a){"disabled"==a?this.$ctrl.filter('[data-counter-action="increase"]').addClass("disabled"):"enabled"==a&&this.$ctrl.filter('[data-counter-action="increase"]').removeClass("disabled")},checkCtrl:function(a){var b=this,c=b.opts;return a=a||c.init},reset:function(){var a=this;a.$input.val(a.opts.init)},bindEvent:function(){var b=this,c=b.opts;b.$ctrl.on("click",function(){if(a(this).hasClass("disabled"))return!1;var d=parseInt(b.$input.val()),e=a(this).data("counter-action");"increase"==e?d+=c.step:"decrease"==e&&(d-=c.step),b.setValue(d)}),b.$input.on("change",function(){var a=parseInt(this.value);b.setValue(a)})},debug:function(){this.debugs&&window.console&&console.log&&console.log("[counter] "+Array.prototype.join.call(arguments," "))}},a.fn.counter=function(c){var d;return this.each(function(){d=a.data(this,"counter"),d||(d=a.data(this,"counter",new b(this,c)))}),d}}(jQuery),function(a){function b(b,c){this.opts=a.extend({initNum:1,debugs:!0},c),this.slides=[],this.$t=a(b),this.debugs=this.opts.debugs,this.init()}b.prototype={init:function(){var a=this.$t.find("option");return a.length?(this.markup(a),void this.setValue(this.opts.initNum)):this.debug("Not a select element!")},markup:function(b){var c=this,d=a(""),e=a('<div class="choose-model ui-simulation-switcher"/>');b.each(function(b){d=d.add('<span class="switcher-'+(b+1)+'"data-value="'+this.value+'" data-name="'+a(this).text()+'">'+a(this).text()+"</span>")}),c.$t.before(e.append(d)).hide(0),c.$switchers=d,d.on("click",function(){var b=a(this);return b.hasClass("onhandled")?!1:(d.addClass("onhandled"),void c.setValue(c.$switchers.not(this).data("value"),function(){d.removeClass("onhandled")}))})},setValue:function(a,b){var c=this,d=c.$switchers.filter('[data-value="'+a+'"]');c.$switchers.not(d).filter(":visible").animate({opacity:"hide"}),d.filter(":hidden").animate({opacity:"show"},function(){b&&"[object Function]"===Object.prototype.toString.call(b)&&b()}),c.$t.val(a).trigger("switcher.change",a)},getValue:function(){return this.$t.val()},debug:function(){this.debugs&&window.console&&console.log&&console.log("[switcher] "+Array.prototype.join.call(arguments," "))}},a.fn.switcher=function(c){var d;return this.each(function(){d=a.data(this,"switcher"),d||(d=a.data(this,"switcher",new b(this,c)))}),d}}(jQuery),function(a){function b(b,c){this.opts=a.extend({showNum:5,maxNum:15,wrap:'[data-records="wrap"]',noneString:"-",debugs:!1},c),this.slides=[],this.idx=0,this.$t=a(b),this.debugs=this.opts.debugs,this.init()}b.prototype={init:function(){var b=this.opts;this.$wrap=a(b.wrap,this.$t),this.$prev=a(".prev",this.$t),this.$next=a(".next",this.$t),this.update(),this.initData(),this.checkCtrl(),this.bindEvent()},initData:function(){var a=this,b=a.opts,c=b.showNum-a.len;if(c>0)for(var d=0;c>d;d++)a.append([-1,-1,-1,-1,-1],!0,!0)},setAppendStatus:function(a){return this.isAppend=a},update:function(){this.$items=this.$wrap.children(),this.len=this.$items.not(".blankRecord").length,this.step=this.$items.eq(0).outerHeight(),this.slideMaxNum=this.len-this.opts.showNum,this.$wrap.height(this.len*this.step)},checkCtrl:function(){var a=this,b=a.idx,c=a.opts;a.len>c.maxNum&&(a.len=c.maxNum),a.len<=c.showNum?a.$prev.add(a.$next).addClass("disabled"):(1>b?a.$prev.addClass("disabled"):a.$prev.removeClass("disabled"),b>=a.slideMaxNum?a.$next.addClass("disabled"):a.$next.removeClass("disabled"))},bindEvent:function(){var b=this;b.$prev.on("click",function(){return a(this).hasClass("disabled")?!1:void b.slide("prev")}),b.$next.on("click",function(){return a(this).hasClass("disabled")?!1:void b.slide("next")}),b.$wrap.on("slide.append",function(c,d){b.isAppend?a(this).append(d):a(this).prepend(d),b.update(),b.$items.filter(function(a){return a>=b.opts.maxNum}).remove(),b.checkCtrl()})},slide:function(a){var b=this,c=b.idx;"prev"==a?c--:c++,b.goto(c)},"goto":function(b,c){var d=this;!b||0>b?b=0:b>d.slideMaxNum&&(b=d.slideMaxNum),d.$wrap.animate({marginTop:-d.step*b},function(){d.idx=b,d.checkCtrl(),c&&a(this).trigger("slide.append",c)})},append:function(a,b,c){var d=this;return d.isAppend=c||!1,a&&"[object Array]"==Object.prototype.toString.call(a)?void d.goto(0,d.getNewRecord(a,b)):alert("开奖记录数据格式有误")},getNewRecord:function(b,c){var d=this,e="",f=c?' class="blankRecord"':"";return a.each(b,function(a,b){e+=0>b?'<span class="num_none">'+d.opts.noneString+"</span>":'<span class="num_'+b+'">'+b+"</span>"}),"<li"+f+">"+e+"</li>"},debug:function(){this.debugs&&window.console&&console.log&&console.log("[records] "+Array.prototype.join.call(arguments," "))}},a.fn.records=function(c){var d;return this.each(function(){d=a.data(this,"records"),d||(d=a.data(this,"records",new b(this,c)))}),d}}(jQuery),function(a){function b(b,c){this.opts=a.extend({showNum:10,ballurl:"javascript:void(0);",markup:'<li>                         <div class="cell1">{{projectId}}</div>                         <div class="cell2">{{writeTime}}</div>                         <div class="cell3">                             <a href="javascript:void(0);" data-link>投注详情</a>                         </div>                         <div class="cell4">                             <span class="price"><dfn>¥</dfn>{{totalprice}}</span>                         </div>                         <div class="cell5" data-ballNum>-,-,-,-,-</div>                         <div class="cell6" data-result>开奖中...</div>                     </li>',debugs:!1},c),this.slides=[],this.$t=a(b),this.debugs=this.opts.debugs,this.init()}b.prototype={init:function(){this.opts},getLength:function(){return this.$items=this.$t.children(),this.$items.length},render:function(a){var b=this,c=b.opts,d=c.markup;for(p in a)a.hasOwnProperty(p)&&(d=b.template(d,p,"totalprice"==p||"winMoney"==p?phoenix.util.formatMoney(a[p]/1e4):a[p]));return d},template:function(a,b,c,d){return d=d||RegExp("{{"+b+"}}","g"),a.replace(d,c)},append:function(b){var c=this;c.data=b,c.$render=a(c.render(b)).prependTo(c.$t),c.getLength()>c.opts.showNum&&c.$items.filter(function(a){return a>=c.opts.showNum}).remove()},update:function(){var a=this,b=a.data;b.result&&a.$render.find("[data-ballNum]").text(b.result),"undefined"!=b.winNum&&"undefined"!=b.winMoney&&Number(b.winNum)>0?a.$render.find("[data-result]").html('<span class="price"><dfn>¥</dfn>'+phoenix.util.formatMoney(b.winMoney/1e4)+"</span>"):a.$render.find("[data-result]").text("未中奖"),a.opts.ballurl&&b.projectId&&a.$render.find("[data-link]").attr("href",a.opts.ballurl+"?orderCode="+b.projectId).attr("target","_blank")},debug:function(){this.debugs&&window.console&&console.log&&console.log("[gameHistory] "+Array.prototype.join.call(arguments," "))}},a.fn.gameHistory=function(c){var d;return this.each(function(){d=a.data(this,"gameHistory"),d||(d=a.data(this,"gameHistory",new b(this,c)))}),d}}(jQuery);
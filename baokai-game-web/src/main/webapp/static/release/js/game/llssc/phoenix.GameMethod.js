!function(a,b,c,d){var e={name:"",UIContainer:"#J-balls-main-panel",ballsDom:".ball-number",ballAidDom:".ball-aid-hot",ballCurrentCls:"ball-number-current",methodMassageDom:".prompt .method-tip",methodExampleDom:".prompt .example-tip",hotColdUrl:"",randomBetsNum:500,danshiLimitBall:2e3},f=a.Games,g={init:function(a){var b=this;b.UIContainer=$(a.UIContainer),b.container=$("<div></div>").appendTo(b.UIContainer),b.buildUI(),b.hide(),b.balls=[],b.rebuildData(),b.ballsDom=b.getBallsDom(),b.ballsAidDom=b.getBallsAidDom(),b.isBallsComplete=!1,b.addEvent("updateData",function(a,b){var c=this,b=c.isBallsComplete?b:{lotterys:[],original:[]};f.getCurrentGameStatistics().updateData(b,c.getGameMethodName()),c.batchSetBallDom()}),b.addEvent("afterReset",function(){b.exeEvent_cancelCurrentButton()}),b.addEvent("afterSetBallData",function(){b.exeEvent_cancelCurrentButton()})},getBallsDom:function(){var a=this,b=a.defConfig,c=a.balls;return c.length<1?[]:a.ballsDom||function(){for(var d=a.container.find(b.ballsDom),e=0,f=d.length,g=[],h=[],i=c[0].length;f>e;e++)g.push(d[e]),(e+1)%i==0&&(h.push(g),g=[]);return h}()},updataGamesInfo:function(){var a=this,b=a.getGameMethodName(),c=f.getCurrentGame(),d=b+"lostcurrentFre",e=f.getCurrentGame().getGameConfig().getInstance().getBetAwardUrl()+"?type="+b+"&extent=currentFre&line=5&lenth=30";f.cacheData.gameBonus||(f.cacheData.gameBonus={}),f.cacheData.gameTips||(f.cacheData.gameTips={}),f.cacheData.frequency||(f.cacheData.frequency={}),f.cacheData.moreBouns||(f.cacheData.moreBouns={}),f.currentIsMoreBouns.moreBouns||(f.currentIsMoreBouns.moreBouns={}),f.cacheData.gameBonus[e]&&c.addDynamicBonus(b,f.cacheData.gameBonus[e]),f.cacheData.gameTips[e]&&a.methodTip(f.cacheData.gameTips[e]),f.cacheData.frequency[d]&&a.getHotCold(b,"currentFre","lost","当前遗漏"),f.cacheData.gameBonus[e]&&f.cacheData.frequency[d]&&f.cacheData.gameTips[e]||$.ajax({url:e,dataType:"json",cache:!1,success:function(g){1==Number(g.isSuccess)&&(data=g.data,"undefined"!=typeof data.gameTips&&(f.cacheData.gameTips[e]=data.gameTips,a.methodTip(data.gameTips)),"undefined"!=typeof data.frequency&&(f.cacheData.frequency[d]=data.frequency,a.getHotCold(b,"currentFre","lost")),data.gameTips&&"undefined"!=typeof data.gameTips.actualBonus&&(f.cacheData.gameBonus[e]=data.gameTips.actualBonus,c.addDynamicBonus(b,data.gameTips.actualBonus)),"undefined"!=typeof g.moreBouns&&(f.currentIsMoreBouns.moreBouns[b]=g.moreBouns))}})},getChart:function(a,b){var c=this,d=$.trim(a),e=f.getCurrentGame().getGameConfig().getInstance().trendChartUrl()+d+"&extent=currentFre&line=5&lenth=30";"undefined"==typeof f.cacheData.charts&&(f.cacheData.charts={}),"undefined"!=typeof f.cacheData.charts[d]?b&&b(f.cacheData.charts[d]):$.ajax({url:e,dataType:"json",cache:!1,success:function(a){if(1==a.isSuccess)a.data.historyBalls,f.cacheData.charts[d]=a.data.historyBalls,b&&b(f.cacheData.charts[d]);else try{console.log("服务器异常,请刷新页面重试。")}catch(c){}}}),c.fireEvent("afterUpdataGamesInfo",a)},methodTip:function(a){var b=this,c=b.defConfig;$(c.methodMassageDom).html(a.tips),$(c.methodExampleDom).html(a.example)},getHotCold:function(a,b,c,d){var e=this,g=e.container.find(".number-select-title"),h=e.container.find(".number-select-content");cacheName=a+c+b,lostClass=".game-frequency-lost-length",freClass=".game-frequency-fre-length",("maxFre"==b||"currentFre"==b)&&(c="lost");var i=f.getCurrentGame().getGameConfig().getInstance().getHotColdUrl()+"?gameMode="+a+"&extent="+b+"&frequencyType="+c+"&line=5&lenth=30";"lost"==c?($(freClass).hide(),$(lostClass).show()):($(freClass).show(),$(lostClass).hide()),g.find("a,li").removeClass("current"),g.find(".period"+b).addClass("current"),g.find("."+c).addClass("current"),h.find(".ball-title span").html(d),f.cacheData.frequency||(f.cacheData.frequency={}),f.cacheData.frequency[cacheName]?e.reBuildHotCold(f.cacheData.frequency[cacheName],c):$.get(i,function(a){e.reBuildHotCold(a,c),f.cacheData.frequency[cacheName]=a},"json")},reBuildHotCold:function(a,b){for(var c,d=this,e=[],f=[],g=0,h=0,i=0;i<a.length;i++){c=a[i];for(var j in c){var k=c[j].currentNum,l=c[j].pinlv;e.push([l,k]),f.push(l),d.setBallAidData(i,k,l)}g=Math.min.apply(Math,f),h=Math.max.apply(Math,f);for(var m=0;m<e.length;m++)"lost"==b?e[m][0]==h&&d.setBallAidData(i,e[m][1],e[m][0],"ball-aid-hot"):(e[m][0]==g&&d.setBallAidData(i,e[m][1],e[m][0],"ball-aid-cold"),e[m][0]==h&&d.setBallAidData(i,e[m][1],e[m][0],"ball-aid-hot"));e=[],f=[]}},initHotColdEvent:function(){var a=this,b=30,c="lost",d="game-frequency-lost-length",e="game-frequency-fre-length",g=".game-frequency-type li",h=".game-frequency-lost-length a, .game-frequency-fre-length a";a.container.on("click",g,function(){var a,g=($(this).parent(),f.getCurrentGame().getCurrentGameMethod().getGameMethodName());$(this).hasClass("fre")?(c=$(this).attr("data-type"),$("."+e).show(),$("."+d).hide(),b=30,a="30期"):$(this).hasClass("lost")&&(c=$(this).attr("data-type"),$("."+e).hide(),$("."+d).show(),b="currentFre",a="当前遗漏"),f.getCurrentGame().getCurrentGameMethod().getHotCold(g,b,c,a)}),a.container.on("click",h,function(){var a=($(this).parent(),f.getCurrentGame().getCurrentGameMethod().getGameMethodName()),b=$(this).html(),d=$(this).attr("data-type");f.getCurrentGame().getCurrentGameMethod().getHotCold(a,d,c,b)})},reSelect:function(a){var b,c,d,e,f,g,h=this,i=(h.getGameMethodName(),a),j=!1;for(h.reSet(),b=0,c=i.length;c>b;b++)for(d=0,e=i[b].length;e>d;d++)f=b,g=i[b][d],h.setBallData(f,g,1),j=!0;j&&h.updateData()},makePostParameter:function(a){for(var b=[],c=a.length,d=0;c>d;d++)b=b.concat(a[d].join(""));return b.join(",")},arrIndexOf:function(a,b){for(var c=0,d=0;d<b.length;d++)b[d]==a&&(c+=1);return c||-1},rebuildData:function(){},getBallData:function(){return this.balls},setBallData:function(a,b,c){var d=this,e=d.getBallData();a>=0&&a<e.length&&b>=0&&b<e[0].length&&(e[a][b]=c),d.fireEvent("afterSetBallData",a,b,c)},setBallAidData:function(a,b,c,d){var e=this,f="ball-aid",g=e.getBallsAidDom(),d=d?f+" "+d:f;a>=0&&a<g.length&&b>=0&&b<g[0].length&&(g[a][b].innerHTML=c,g[a][b].className=d)},getBallsAidDom:function(){var a=this,b=a.defConfig,c=a.balls;return c.length<1?[]:a.ballsAidDom||function(){for(var d=a.container.find(b.ballAidDom),e=0,f=d.length,g=[],h=[],i=c[0].length;f>e;e++)g.push(d[e]),(e+1)%i==0&&(h.push(g),g=[]);return h}()},reSet:function(a){var b=this;b.isBallsComplete=!1,b.rebuildData(a),b.updateData(),b.fireEvent("afterReset")},getGameMethodName:function(){return this.defConfig.name},show:function(){var a=this;a.fireEvent("beforeShow"),a.container.show(),a.fireEvent("afterShow")},hide:function(){var a=this;a.fireEvent("beforeHide"),a.container.hide(),a.fireEvent("afterHide")},exeEvent:function(a,b){var c=this;$.isFunction(c["exeEvent_"+a.action])&&c["exeEvent_"+a.action].call(c,a,b)},exeEvent_batchSetBall:function(a,b){var c=this,d=c.balls,e=Number(a.row),g=a.bound,h=d[e],i=0,j=h.length,k="undefined"==typeof a.start?0:Number(a.start);for(halfLen=Math.ceil((j-k)/2+k),dom=$(b),i=k;j>i;i++)c.setBallData(e,i,-1);switch(g){case"all":for(i=k;j>i;i++)c.setBallData(e,i,1);break;case"big":for(i=halfLen;j>i;i++)c.setBallData(e,i,1);break;case"small":var l;for(l=f.getCurrentGame().getGameConfig().getInstance().defConfig.gameType.indexOf("115")<0?k:"quwei.normal.caizhongwei"==c.defConfig.name?k+2:k+1,i=l;halfLen>i;i++)c.setBallData(e,i,1);break;case"odd":for(i=k;j>i;i++)(i+1)%2!=1&&c.setBallData(e,i,1);break;case"even":for(i=k;j>i;i++)(i+1)%2==1&&c.setBallData(e,i,1);break;case"none":}dom.addClass("current"),c.updateData()},exeEvent_cancelCurrentButton:function(){var a=this,b=a.container,c="undefined"!=typeof x?b.find(".ball-control").eq(x):b.find(".ball-control");c.find("a").removeClass("current")},exeEvent_ball:function(a,b){var c=this,e=$(b),f=c.defConfig.ballCurrentCls;if(a.value!=d&&a.row!=d)e.hasClass(f)?c.setBallData(Number(a.row),Number(a.value),-1):(c.fireEvent("beforeSelect"),c.setBallData(Number(a.row),Number(a.value),1));else try{console.log("GameMethod.exeEvent_ball: lack param")}catch(g){}c.updateData()},batchSetBallDom:function(){for(var a=this,b=a.defConfig,c=b.ballCurrentCls,d=a.balls,e=0,f=0,g=d.length,h=0,i=a.getBallsDom(),j="";g>e;e++)for(h=d[e].length,f=0;h>f;f++)1==d[e][f]?(j=i[e][f].className,j=(" "+j+" ").replace(" "+c,""),j+=" "+c,i[e][f].className=j):(j=i[e][f].className,j=(" "+j+" ").replace(" "+c,""),i[e][f].className=j)},updateData:function(){var a=this,b=a.getLottery();a.fireEvent("updateData",{lotterys:b,original:a.getOriginal()})},getOriginal:function(){var a=this,b=a.getBallData(),c=b.length,d=b[0].length;for(i=0,j=0,row=[],result=[];c>i;i++){for(row=[],j=0;d>j;j++)b[i][j]>0&&row.push(j);result.push(row)}return result},getLottery:function(a){for(var b,c=this,d=c.getBallData(),e=0,f=d.length,g=!0,h=0,i=0,j=[],k=1,l=0;f>e;e++){for(j[e]=[],b=d[e],i=b.length,g=!0,l=0,h=0;i>h;h++)b[h]>0&&(g=!1,a||j[e].push(h),l++);if(g)return c.isBallsComplete=!1,[];k*=l}return c.isBallsComplete=!0,a?k:c.isBallsComplete?c.combination(j):[]},removeSame:function(a){{var b,c=0,d=this,e=this.getBallData()[0].length;a.length}for(b=Math.floor(Math.random()*e);c<a.length;c++)if(b==a[c])return arguments.callee.call(d,a);return b},removeArraySame:function(a){{var b,c=this,d=0,e=c.getBallData()[0].length;data.length}for(b=Math.floor(Math.random()*e);d<a.length;d++)if(b==a[d])return arguments.callee.call(c,a);return b},getRandomBetsNum:function(){return this.defConfig.randomBetsNum},createRandomNum:function(){for(var a=this,b=[],c=a.getBallData().length,d=a.getBallData()[0].length,e=0;c>e;e++)b[e]=[Math.floor(Math.random()*d)],b[e].sort(function(a,b){return a>b?1:-1});return b},checkRandomBets:function(a,b){var c=this,d="undefined"==typeof a?!0:!1,a=a||{},e=[],b=b||0,g=(c.getBallData().length,c.getBallData()[0].length,f.getCurrentGameOrder().getTotal().orders);if(e=c.createRandomNum(),Number(b)>Number(c.getRandomBetsNum()))return e;if(d)for(var h=0;h<g.length;h++)if(g[h].type==c.defConfig.name){var i=g[h].original.join("");a[i]=i}return a[e.join("")]?(b++,arguments.callee.call(c,a,b)):e},randomNum:function(){var a=this,b=[],c=null,d=(a.getBallData(),a.defConfig.name,[]),e=[];return b=a.checkRandomBets(),e=b,d=a.combination(e),c={type:f.getCurrentGame().getCurrentGameMethod().getGameMethodName(),original:e,lotterys:d,moneyUnit:f.getCurrentGameStatistics().getMoneyUnit(),multiple:f.getCurrentGameStatistics().getMultip(),onePrice:f.getCurrentGameStatistics().getOnePrice(),num:d.length},c.amountText=f.getCurrentGameStatistics().formatMoney(c.num*c.moneyUnit*c.multiple*c.onePrice),c},randomLotterys:function(a){var b=this,c=0;for(f.getCurrentGameOrder().cancelSelectOrder();a>c;c++)f.getCurrentGameOrder().add(b.randomNum())},ballsErrorTip:function(){},countBallsNum:function(){for(var a=this,b=0,c=a.getBallData(),d=c.length-1;d>=0;d--)if("[object Array]"==Object.prototype.toString.call(c[d])&&c[d].length>0)for(var e=c[d].length-1;e>=0;e--)1==c[d][e]&&b++;else 1==c[d]&&b++;return b},countBallsNumInLine:function(a){var b=this,c=0,d=b.getBallData();if("[object Array]"==Object.prototype.toString.call(d[a])&&d[a].length>0)for(var e=d[a].length-1;e>=0;e--)1==d[a][e]&&c++;else 1==d[a]&&c++;return c||-1},LimitMaxBalls:function(a){{var b=this,c=0;b.getBallData(),Number(c)}return c=b.countBallsNum(),c>a?!0:!1},checkBallIsComplete:function(){for(var a,b=this,c=b.getBallData(),d=0,e=c.length,f=!0,g=0,h=0;e>d;d++){for(a=c[d],h=a.length,f=!0,g=0;h>g;g++)a[g]>0&&(f=!1);if(f)return b.isBallsComplete=!1,!1}return b.isBallsComplete=!0},combine:function(a,b,c){var d=[],e=0;if(c=c||[],0==b)return[c];for(;e<=a.length-b;e++)d=d.concat(arguments.callee(a.slice(e+1),b-1,c.slice(0).concat(a[e])));return d},combination:function(a){if(a.length<1)return[];var b,c,d,e=(a[0].length,a.length),f=[],g=[],h=[];for(f[b=e]=1;b--;)f[b]=f[b+1]*a[b].length;for(d=f[0],b=0;d>b;b++){for(h=[],c=0;e>c;c++)h[c]=a[c][~~(b%f[c]/f[c+1])];g[b]=h}return g},checkLimitBall:function(a){var b=this,c=b.defConfig.danshiLimitBall,d=f.getCurrentGameMessage(),e=Number(a.lotterys.length)||0;e>b.defConfig.danshiLimitBall&&(a.lotterys=[],d.show({mask:!0,content:['<div class="bd text-center">','<div class="pop-waring">','<i class="ico-waring"></i>','<div style="display:inline-block;*zoom:1;*display:inline;vertical-align:middle">最多支持'+c+"注单式内容，请调整！</div>","</div>","</div>"].join(""),closeIsShow:!0,closeFun:function(){this.hide()}}))}},h=a.Class(g,c);h.defConfig=e,a[b]=h}(phoenix,"GameMethod",phoenix.Event);
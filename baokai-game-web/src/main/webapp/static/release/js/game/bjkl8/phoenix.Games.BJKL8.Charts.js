!function(a,b,c){var d,e={period:[30,50,100,200],Parameter:[],maxGradu:0,maxIntGradu:0,average:0,graduLength:5,ChartHeight:179,ChartWidth:430,dataGroupNum:0,currentType:"",url:"/gameTrend/getKl8ChartResult"},f={},g=(a.Games,{init:function(){var a=this;a.bindPerIod()},getParamter:function(){return this.defConfig.Parameter},setParamter:function(a){return this.defConfig.Parameter=a,this.mathNum(),this},getGraduLength:function(){return this.defConfig.graduLength},setGraduLength:function(a){this.defConfig.graduLength=a},getMaxGradu:function(){return this.defConfig.maxGradu},setMaxGradu:function(a){this.defConfig.maxGradu=a},getAverage:function(){return this.defConfig.average},setAverage:function(a){this.defConfig.average=a},getmaxIntGradu:function(){return this.defConfig.maxIntGradu},setmaxIntGradu:function(a){this.defConfig.maxIntGradu=a},getDataGroupNum:function(){return this.defConfig.dataGroupNum},setDataGroupNum:function(a){this.defConfig.dataGroupNum=a},getChartHeight:function(){return this.defConfig.ChartHeight},setChartHeight:function(a){this.defConfig.ChartHeight=a},getChartWidth:function(){return this.defConfig.ChartWidth},setChartWidth:function(a){this.defConfig.ChartWidth=a},getPeriod:function(){return this.defConfig.period},setPeriod:function(a){this.defConfig.period=a},getPostUrl:function(){return this.defConfig.url},setPostUrl:function(a){this.defConfig.url=a},getCurrentType:function(){return this.defConfig.currentType},setCurrentType:function(a){this.defConfig.currentType=a},checkExist:function(){var a=$("#calculate");return 0==a.size()?!1:!0},getDataListText:function(a){for(var b=[],c=0;c<a.length;c++){b.push('<li class="group'+c+'">');for(var d=0;d<a[c].length;d++)b.push("<span>"+a[c][d][0]+"</span>");b.push("</li>")}return b.join("")},getPeriodText:function(a){for(var b="",c=0;c<a.length;c++)b+=0==c?'<span class="chartsPerionButton current" data-period="'+a[c]+'">'+a[c]+"期</span>":'<span class="chartsPerionButton" data-period="'+a[c]+'">'+a[c]+"期</span>";return b},getDataGroupText:function(a){for(var b={},c=[],d=0;d<a.length;d++)for(var e=0;e<a[d].length;e++)"undefined"==typeof b[a[d][e][3]]?b[a[d][e][3]]=[a[d][e][0]]:b[a[d][e][3]].push(a[d][e][0]);for(var f in b){c.push('<li class="f'+f+'"><div class="color-box '+f+'"></div>');for(var g=0;g<b[f].length;g++){var h=b[f].length==g+1?"":",";c.push("<span>"+b[f][g]+"</span>"+h)}c.push("</li>")}return c.join("")},getMaxNum:function(a){for(var b=[],c=a.length-1;c>=0;c--)for(var d=a[c].length-1;d>=0;d--)b.push(a[c][d][2]);return Math.max.apply(Math,b)},mathInteger:function(a){var b=this,c=0,a=b.getMaxGradu();do c+=10;while(a>c);return c},mathAverage:function(){var a=this,b=a.defConfig.maxIntGradu;return b/a.getGraduLength()},mathAverageWidth:function(){var a=this,b=a.getChartWidth(),c=a.getDataGroupNum();return b/c},mathUnitHeight:function(){var a=this;return a.getChartHeight()/(a.getmaxIntGradu()+a.getAverage())},mathNum:function(){var a=this,b=(a.defConfig,a.getParamter());a.setMaxGradu(a.getMaxNum(b)),a.setmaxIntGradu(a.mathInteger()),a.setAverage(a.mathAverage()),a.setDataGroupNum(b.length)},changeButtonUpdate:function(a){var b=$("#calculate"),c=b.find(".buttons");c.find("span").removeClass("current"),c.find("span[data-period="+a+"]").addClass("current")},loadData:function(a,b){{var c=this,d=a.count,e=a.type,g=""+d+e;c.getPeriod()}if(c.setCurrentType(e),c.changeButtonUpdate(d),f[g]){if(c.checkExist())c.setParamter(f[g]).update();else{c.setParamter(f[g]);try{}catch(h){}}return void(b&&b.call(c))}$.ajax({url:c.getPostUrl(),type:"get",dataType:"json",data:{count:d,type:e},success:function(a){if("undefined"==typeof f[g]&&(f[g]=a),c.checkExist())c.setParamter(a).update();else{c.setParamter(a);try{}catch(d){}}b&&b.call(c)}})},bindPerIod:function(){{var a=this,b=(a.defConfig,$("#calculate"));b.find(".button")}$(document).on("click",".chartsPerionButton",function(){a.loadData({count:$(this).attr("data-period"),type:a.getCurrentType()})})},update:function(){var a=this,b=a.defConfig,c=b.Parameter,d=$("#calculate");databox=d.find(".databox"),graduation=d.find(".graduation li");for(var e=a.getGraduLength()+1;e>=0;e--)graduation.eq(a.getGraduLength()+1-e).find(".graduNum").html(a.getAverage()*e);for(var e=c.length-1;e>=0;e--)for(var f=c[e].length-1;f>=0;f--)d.find("."+c[e][f][1]).css("height",parseInt(a.mathUnitHeight()*c[e][f][2])),d.find("."+c[e][f][1]+" .title").html(c[e][f][2])},getHtml:function(){var a=this,b=a.defConfig,c=b.Parameter,d=b.period,e=(a.defConfig.htmlDom,a.getDataGroupNum()),f=[];f.push('<div id="calculate">'),f.push('<div class="buttons clearfix">'+a.getPeriodText(d)+'</div><div class="clearfix"><ul class="graduation">');for(var g=a.getGraduLength()+1;g>=0;g--)f.push('<li><span class="graduNum">'+a.getAverage()*g+"</span></li>");f.push("</ul>"),f.push('<ul class="result">');for(var g=0;e>g;g++){f.push('<li class="dataGroup" style="width:'+a.mathAverageWidth()+'px">');for(var h=0;h<c[g].length;h++)f.push('<div class="databox '+c[g][h][1]+" "+c[g][h][3]+'" style="height:'+parseInt(a.mathUnitHeight()*c[g][h][2])+'px"><div class="title f'+c[g][h][3]+'">'+c[g][h][2]+"</div></div>");f.push("</li>")}return f.push("</ul></div>"),f.push('<ul class="data-list-text clearfix">'),f.push(a.getDataListText(c)),f.push("</ul>"),f.push('<ul class="data-group-text clearfix">'),f.push(a.getDataGroupText(c)),f.push("</ul>"),f.push("</div>"),f.join("")},destroy:function(){var a=$("#calculate");a.remove()}}),h=a.Class(g,c);h.defConfig=e,h.getInstance=function(a){return d||(d=new h(a))},a.Games.BJKL8[b]=h}(phoenix,"Charts",phoenix.Event);
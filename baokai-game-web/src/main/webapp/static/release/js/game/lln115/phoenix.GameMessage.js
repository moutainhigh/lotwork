!function(a,b,c){var d,e={lotteryClose:['<div class="bd text-center">','<p class="text-title text-left"><#=msg#><br /></p>','<dl class="lottery-list">',"<dt>您可以购买以下彩种</dt>","<#=lotteryType#>","</dl>","</div>"].join(""),checkLotters:['<div class="bd">','<ul class="ui-form">',"<li>",'<label for="question1" class="ui-label">彩种：</label>','<span class="ui-text-info"><#=lotteryName#></span>',"</li>","<li>",'<label for="question1" class="ui-label" >期号：</label>','<span class="ui-text-info"><#=lotteryDate#></span>',"</li>","<li>",'<label for="answer1" class="ui-label">详情：</label>','<div class="textarea" style="font-size:12px;" >',"<#=lotteryInfo#>","</div>","</li>","<li>",'<label for="question2" class="ui-label">付款总金额：</label>','<span class="ui-text-info"><span class="color-red"><#=lotteryamount#></span>元</span>',"</li>","<li>",'<label for="question2" class="ui-label">付款帐号：</label>','<span class="ui-text-info"><span class="color-red"><#=lotteryAcc#></span></span>',"</li>","</ul>",'<p class="text-note"><#=lotteryChareg#></p>','<p class="text-note"><#=lotteryCharegPlurality#></p>',"</div>"].join(""),nonSaleTime:['<div class="bd text-center">','<p class="text-title text-left">非常抱歉，本彩种未到销售时间。<br />请与<#=orderDate#>后再购买</p>','<dl class="lottery-list">',"<dt>您可以购买以下彩种</dt>","<#=lotteryType#>","</dl>","</div>"].join(""),normal:['<div class="bd text-center">','<div class="pop-waring">','<i class="ico-waring <#=icon-class#>"></i>','<h4 class="pop-text"><#=msg#><br /></h4>',"</div>","</div>"].join(""),invalidtext:['<div class="bd text-center">','<div class="pop-waring">','<i class="ico-waring <#=icon-class#>"></i>','<h4 class="pop-text"><#=msg#><br /></h4>',"</div>","</div>"].join(""),betExpired:['<div class="bd text-center">','<div class="pop-waring">','<i class="ico-waring <#=icon-class#>"></i>','<h4 class="pop-text"><#=msg#><br /></h4>',"</div>","</div>"].join(""),multipleOver:['<div class="bd text-center">','<div class="pop-waring">','<i class="ico-waring <#=icon-class#>"></i>','<h4 class="pop-text"><#=msg#><br /></h4>',"</div>","</div>"].join(""),pauseBet:['<div class="bd text-center">','<div class="pop-waring">','<i class="ico-waring <#=icon-class#>"></i>','<h4 class="pop-text"><#=msg#><br /></h4>',"</div>","</div>"].join(""),successTip:['<div class="bd text-center">','<div class="pop-title">','<i class="ico-success"></i>','<h4 class="pop-text"><#=msg#><br /></h4>',"</div>",'<p class="text-note">您可以通过”<a href="'+baseUrl+'<#=url#>" target="_black"><#=gameType#></a>“查询您的投注记录！</p>',"</div>"].join(""),checkBalls:['<div class="bd text-center">','<div class="pop-title">','<i class="ico-waring <#=iconClass#>"></i>','<h4 class="pop-text">请至少选择一注投注号码！</h4>',"</div>",'<div class="pop-btn ">','<a href="javascript:void(0);" class="btn closeBtn">关 闭<b class="btn-inner"></b></a>',"</div>","</div>"].join(""),subFaild:['<div class="bd text-center">','<div class="pop-title">','<i class="ico-error"></i>','<h4 class="pop-text"><#=msg#><br /></h4>',"</div>",'<div class="pop-btn ">','<a href="javascript:void(0);" class="btn closeBtn">关 闭<b class="btn-inner"></b></a>',"</div>","</div>"].join(""),Insufficientbalance:['<div class="bd text-center">','<div class="pop-title">','<i class="ico-error"></i>','<h4 class="pop-text">您的余额不足，请充值！</h4>',"</div>","</div>"].join(""),overLimit:['<div class="bd text-center"><div class="pop-title"><i class="ico-waring"></i><h4 class="pop-text"><#=msg#><br /></h4></div>','<div class="content" style="max-height:150px;overflow:auto;">',"<#=contentinfo#>","</div>","</div>"].join("")},f=null,g=a.Games,h={init:function(){var b=this;b.win=new a.MiniWindow({cls:"pop w-9"}),b.mask=a.Mask.getInstance(),b.reSet(),b.win.addEvent("afterHide",function(){b.reSet()})},doAction:function(a){var b=this,c="rebulid"+a.type,d="getHtml"+a.type,e=function(){};b[c]&&$.isFunction(b[c])&&(e=b[c]),a.tpl="undefined"==typeof a.tpl?b[d]():""+a.tpl,delete a.type,e.call(b,a)},formatHtml:function(a,b){var c,d,e=b;for(c in e)e.hasOwnProperty(c)&&(d=RegExp("<#="+c+"#>","g"),a=a.replace(d,e[c]));return a},arrIndexOf:function(a,b){for(var c=0,d=0;d<b.length;d++)b[d]==a&&(c+=1);return c||-1},getHtmlWaring:function(){var a=this.defConfig;return a.normal},rebulidnormal:function(a){var b=this,c={};c.mask=!0,c.closeText="关 闭",c.closeIsShow=!0,c.closeFun=function(){b.hide()},c.content=b.formatHtml(a.tpl,a.data.tplData),b.show($.extend(c,a))},getHtmlnormal:function(){return this.getHtmlWaring()},rebulidcheckLotters:function(a){var b=this,c=(g.getCurrentGameOrder().getTotal().orders,a.data.tplData.lotteryTraceInfo()),d=phoenix.util.ToForamtmoney(a.data.tplData.lotteryamount),e=Number(g.getCurrentGame().getGameConfig().getInstance().defConfig.backOutStartFee)/1e4,f=Number(g.getCurrentGame().getGameConfig().getInstance().defConfig.backOutRadio)/1e4;if(result={},result.mask=!0,result.iconClass="",c.length<1)d>e&&0!=Number(e)&&0!=Number(f)?(a.data.tplData.lotteryChareg='<div id="showLotteryChareg" style="display: none;">购买后请您尽量避免撤单，如撤单将收取手续费：<span class="price"><dfn>&yen;</dfn><span class="handlingCharge">'+g.getCurrentGameStatistics().formatMoney(f*d,3)+"</span>元</span></div>",a.data.tplData.lotteryCharegPlurality=""):(a.data.tplData.lotteryChareg="",a.data.tplData.lotteryCharegPlurality="");else{a.data.tplData.lotteryChareg="";var h="",i=0,j=0,k=a.data.tplData.lotteryOnlyAmount;h='<div style="margin-top:-12px;" id="showLotteryChareg">购买后请您尽量避免撤单，如撤单将收取手续费：</div><ul class="textarea cancel-bets clearfix" style="font-size:12px;margin-top:10px;"> <li><span style="font-size:13px;font-weight:500">奖期</span><span style="font-size:13px;font-weight:500">撤单手续费</span></li>';for(var l=0;l<c.length;l++)i=Number(c[l].multiple*k),i>e&&(j+=i*f,h+="<li><span>第"+c[l].number+'期</span><span class="price"><dfn>&yen;</dfn>'+g.getCurrentGameStatistics().formatMoney(i*f,3)+"元</span></li>");h+="</ul>",a.data.tplData.lotteryCharegPlurality=j>0&&0!=Number(e)&&0!=Number(f)?h:""}result.content=b.formatHtml(a.tpl,a.data.tplData),b.show($.extend(result,a))},getHtmlcheckLotters:function(){var a=this.defConfig;return a.checkLotters},rebulidlotteryClose:function(a){var b=this,c=(g.getCurrentGameOrder().getTotal().orders,{});c.mask=!0,c.iconClass="",c.content=b.formatHtml(a.tpl,a.data.tplData),b.show($.extend(c,a))},getHtmllotteryClose:function(){var a=this.defConfig;return a.lotteryClose},rebulidnonSaleTime:function(a){var b=this,c={};time=a.data.tplData.orderDate,typeArray=a.data.tplData.lotteryType,c.mask=!0,c.iconClass="",c.closeIsShow=!0,c.closeFun=function(){b.hide()},a.data.tplData.orderDate=function(){return time.year+"年"+time.month+"月"+time.day+"日 "+time.hour+":"+time.min},a.data.tplData.lotteryType=function(){var a="";if($.isArray(typeArray))for(var b=0;b<typeArray.length;b++)a+='<dd><span style="background:url('+typeArray[b].pic+')" class="pic" title="'+typeArray[b].name+'" alt="'+typeArray[b].name+'"></span><a href="'+typeArray[b].url+'" class="btn">去投注<b class="btn-inner"></b></a></dd>';return a},c.content=b.formatHtml(a.tpl,a.data.tplData),b.show($.extend(c,a))},getHtmlnonSaleTime:function(){var a=this.defConfig;return a.nonSaleTime},rebulidmustChoose:function(a){var b=this,c={};c.mask=!0,c.iconClass="",c.closeIsShow=!0,c.closeFun=function(){b.hide()},c.content=b.formatHtml(a.tpl,a.data.tplData),b.show($.extend(c,a))},getHtmlmustChoose:function(){return this.getHtmlWaring()},rebulidnetAbnormal:function(a){var b=this,c={};c.mask=!0,c.iconClass="",c.closeIsShow=!0,c.closeFun=function(){b.hide()},c.content=b.formatHtml(a.tpl,a.data.tplData),b.show($.extend(c,a))},getHtmlnetAbnormal:function(){return this.getHtmlWaring()},rebulidsuccess:function(a){var b=this,c={};c.mask=!0,c.iconClass="",c.closeIsShow=!0,c.closeFun=function(){b.hide()},c.content=b.formatHtml(a.tpl,a.data.tplData),b.show($.extend(c,a))},getHtmlsuccess:function(){var a=this.defConfig;return a.successTip},rebulidloginTimeout:function(a){var b=this,c={};c.mask=!0,c.closeIsShow=!0,c.closeFun=function(){b.hide()},c.content=b.formatHtml(a.tpl,a.data.tplData),b.show($.extend(c,a))},getHtmlloginTimeout:function(){return this.getHtmlWaring()},rebulidserverError:function(a){var b=this,c={};c.mask=!0,c.iconClass="",c.closeIsShow=!0,c.closeFun=function(){b.hide()},c.content=b.formatHtml(a.tpl,a.data.tplData),b.show($.extend(c,a))},getHtmlserverError:function(){return this.getHtmlWaring()},rebulidsubFaild:function(a){var b=this,c={};c.mask=!0,c.iconClass="",c.closeIsShow=!0,c.closeFun=function(){b.hide()},c.content=b.formatHtml(a.tpl,a.data.tplData),b.show($.extend(c,a))},getHtmlsubFaild:function(){return this.getHtmlWaring()},rebulidInsufficientbalance:function(a){var b=this,c={};c.mask=!0,c.closeIsShow=!0,c.confirmIsShow=!0,c.confirmText="去充值",c.confirmFun=function(){window.open(_logOut+"/fund")},c.closeFun=function(){b.hide()},c.content=b.formatHtml(a.tpl,a.data.tplData),b.show($.extend(c,a))},getHtmlInsufficientbalance:function(){return this.getHtmlWaring()},rebulidpauseBet:function(a){var b=this,c={};c.mask=!0,c.confirmText="投 注",c.confirmIsShow=!0,c.confirmFun=function(){for(var b=g.getCurrentGameOrder(),c=0;c<a.data.tplData.balls.length;c++)for(j=0;j<b.orderData.length;j++)b.orderData[j].id==a.data.tplData.balls[c].id&&b.orderData.splice(j,1);g.getCurrentGameSubmit().submitData()},c.closeText="关 闭",c.closeIsShow=!0,c.closeFun=function(){b.hide()},a.data.tplData.msg=function(){for(var c=[],d=g.getCurrentGame().getGameConfig().getInstance(),e=0;e<a.data.tplData.balls.length;e++){var f=a.data.tplData.balls[e].type,h=d.getTitleByName(f);-1==b.arrIndexOf(h.join(""),c)&&c.push(h.join(""))}return"您的投注内容中“"+c.join("")+"”已暂停销售，是否完成剩余内容投注？"},c.content=b.formatHtml(a.tpl,a.data.tplData),b.show($.extend(c,a))},getHtmlpauseBet:function(){var a=this.defConfig;return a.pauseBet},rebulidmultipleOver:function(a){var b=this,c={};c.mask=!0,c.iconClass="",c.closeText="关 闭",c.closeIsShow=!0,c.closeFun=function(){b.hide()},a.data.tplData.msg=function(){for(var c=[],d=g.getCurrentGame().getGameConfig().getInstance(),e=0;e<a.data.tplData.balls.length;e++){var f=a.data.tplData.balls[e].type,h=d.getTitleByName(f);-1==b.arrIndexOf(h.join(""),c)&&c.push(h.join(""))}return"您的投注内容中“"+c.join("")+"”超出倍数限制，请调整！"},c.content=b.formatHtml(a.tpl,a.data.tplData),b.show($.extend(c,a))},getHtmlmultipleOver:function(){var a=this.defConfig;return a.multipleOver},rebulidinvalidtext:function(a){var b=this,c={};c.mask=!0,c.confirmText="刷新页面",c.confirmIsShow=!0,c.confirmFun=function(){window.location.reload()},c.content=b.formatHtml(b.getHtmlinvalidtext(),a),b.show($.extend(c,a))},getHtmlinvalidtext:function(){var a=this.defConfig;return a.invalidtext},rebulidbetExpired:function(a){var b=this,c={};c.mask=!0,c.closeText="关 闭",c.closeIsShow=!0,c.closeFun=function(){b.hide()},a.data.tplData.msg=function(){return"您好，"+a.data.tplData.bitDate.expiredDate+"期 已截止销售，当前期为"+a.data.tplData.bitDate.current+"期 ，请留意！"},c.content=b.formatHtml(b.getHtmlbetExpired(),a.data.tplData),b.show($.extend(c,a))},getHtmlbetExpired:function(){var a=this.defConfig;return a.betExpired},rebulidillegalTools:function(a){var b=this,c={};c.mask=!0,c.confirmText="刷新页面",c.confirmIsShow=!0,c.confirmFun=function(){window.location.reload()},c.content=b.formatHtml(b.getHtmlbetExpired(),a.data.tplData),b.show($.extend(c,a))},getHtmlillegalTools:function(){return this.getHtmlWaring()},getHtmloverLimit:function(){return this.defConfig.overLimit},rebulidoverLimit:function(a){var b,c,d=this,e={},f=a.data.tplData,g=a.data.overMutipleData,h=[],i=0;e.mask=!0,e.closeText="确 定",e.closeIsShow=!0,e.closeFun=function(){d.hide()},$.each(g,function(a){c=g[a].betDetail.length>3?g[a].betDetail.substr(0,3)+".. <a title="+g[a].betDetail+">详情</a>":g[a].betDetail,h.push(g[a].webIssueCode+"期&nbsp;&nbsp;"+g[a].betMethod+"&nbsp;&nbsp;"),"1"==$.trim(g[a].moneyunit)?(i=parseFloat(g[a].multiple)/10,b="元"):(i=parseFloat(g[a].multiple),b="角"),h.push(c+"&nbsp;&nbsp;("+b+")本期最多投"),h.push("&nbsp;&nbsp;"+i+"倍</br>")}),f.contentinfo=h.join(""),e.content=d.formatHtml(d.getHtmlbetExpired(),a.data.tplData),d.show($.extend(e,a))},rebulidsubFailed:function(a){var b=this,c={};c.mask=!0,c.closeText="关 闭",c.closeIsShow=!0,c.closeFun=function(){b.hide()},c.content=b.formatHtml(b.getHtmlbetExpired(),a.data.tplData),b.show($.extend(c,a))},getHtmlsubFailed:function(){return this.getHtmlWaring()},setTitle:function(a){var b=this,c=b.win;c.setTitle(a)},setContent:function(a,b){var c=this,d=c.win;d.setContent(a,b)},hideClose:function(){var a=this,b=a.win;b.getCloseDom().hide()},hideTitle:function(){var a=this,b=a.win;b.getTitleDom().hide()},show:function(a){var b=this,c=b.win;if(b.reSet(),"undefined"==typeof a.data&&(a.data={}),a.data.tplData="undefined"==typeof a.data.tplData?{}:a.data.tplData,a){if(a.type)return void b.doAction(a);"undefined"!=typeof a.tpl&&(a.content=b.formatHtml(a.tpl,a.data.tplData)),f&&(clearTimeout(f),f=null),b.setTitle(a.title||"温馨提示"),b.setContent(a.content||""),a.confirmText&&c.setConfirmName(a.confirmText),a.cancelText&&c.setCancelName(a.cancelText),a.closeText&&c.setCloseName(a.closeText),a.normalCloseFun&&(c.doNormalClose=a.normalCloseFun),a.confirmFun&&(c.doConfirm=a.confirmFun),a.cancelFun&&(c.doCancel=a.cancelFun),a.closeFun&&(c.doClose=a.closeFun),a.confirmIsShow&&c.showConfirmButton(),a.cancelIsShow&&c.showCancelButton(),a.closeIsShow&&c.showCloseButton(),a.hideTitle&&b.hideTitle(),a.hideClose&&b.hideClose(),a.mask&&b.mask.show(),b.limitHeight(),c.show(),a.callback&&a.callback.call(b),a.time&&(f=setTimeout(function(){b.hide(),clearTimeout(f),f=null},1e3*a.time))}},limitHeight:function(){var a=this,b=$(window).height(),c=a.getContainerDom(),d=c.outerHeight();d>b&&(c.height(Math.floor(.9*b)),c.css({overflow:"auto"}))},getContainerDom:function(){var a=this;return a.win.getContainerDom()},getContentDom:function(){var a=this;return a.win.getContentDom()},hide:function(){var a=this,b=a.win;b.hide(),a.reSet()},reSet:function(){var a=this,b=a.win;a.mask.hide(),a.setTitle("提示"),a.setContent(""),b.hideConfirmButton(),b.hideCancelButton(),b.hideCloseButton(),b.doConfirm=function(){},b.doCancel=function(){},b.doClose=function(){},b.doNormalClose=function(){},b.setConfirmName("确 认"),b.setCancelName("取 消"),b.setCloseName("关 闭"),b.reSetPosition()}},i=a.Class(h,c);i.defConfig=e,i.getInstance=function(a){return d||(d=new i(a))},a[b]=i}(phoenix,"GameMessage",phoenix.Event);